import{a as j}from"./chunk-GTLMDP7R.js";import{a as D}from"./chunk-RQELFUR7.js";import{b as T}from"./chunk-DW5KVXRS.js";import"./chunk-ZFOFE4YQ.js";import"./chunk-LUY36RVE.js";import"./chunk-INS7BFHF.js";import"./chunk-6WBH7IPC.js";import"./chunk-3PMNG65X.js";import"./chunk-4P6JCT6G.js";import"./chunk-ESTKDGOR.js";import"./chunk-HU7WFQWJ.js";import{a as E,b as V}from"./chunk-QCGIDFDQ.js";import{b as k,d as z}from"./chunk-RA5YA7SP.js";import"./chunk-AE4C5XQ6.js";import"./chunk-C5RMYWSX.js";import"./chunk-P4ZELJWN.js";import"./chunk-CG5ODPV4.js";import"./chunk-OQ23N4OO.js";import"./chunk-MB2EZ7OD.js";import{$a as x,Ib as c,Ob as h,Tb as o,Ub as r,Vb as _,Xb as I,Zb as p,_b as l,cb as n,db as P,dc as b,ec as y,fc as S,jc as s,kc as m,lc as C,ma as d,na as g,pb as w,tb as M,wb as O}from"./chunk-UUT3EF6T.js";var F=["images"];function Q(i,v){if(i&1&&(o(0,"p"),s(1),r()),i&2){let t=l();n(),m(t.post.content)}}function A(i,v){if(i&1){let t=I();o(0,"div",18,0),p("mouseenter",function(){d(t);let e=l();return g(e.pauseSlider())})("mouseleave",function(){d(t);let e=l();return g(e.resumeSlider())}),o(2,"div",19)(3,"div",20),p("click",function(){d(t);let e=l();return g(e.prevImage())}),o(4,"mat-icon",21),s(5,"chevron_left"),r()(),o(6,"img",22),p("click",function(){d(t);let e=l();return g(e.focusImage())}),r(),o(7,"div",23),p("click",function(){d(t);let e=l();return g(e.nextImage())}),o(8,"mat-icon",21),s(9,"chevron_right"),r()()(),o(10,"div",24),s(11),r()()}if(i&2){let t=l();n(6),c("src",t.currentImage==null?null:t.currentImage.source,x)("title",t.currentImage==null?null:t.currentImage.title),n(5),m(t.currentImagePos)}}function U(i,v){if(i&1&&_(0,"img",17),i&2){let t=l();c("src",t.currentImage==null?null:t.currentImage.source,x)("title",t.currentImage==null?null:t.currentImage.title)}}function B(i,v){if(i&1&&(o(0,"p"),s(1),r()),i&2){let t=l();n(),m(t.post.content)}}var J=(()=>{class i extends T{constructor(t){super(t),this.service=t,this.imageIndex=0,this.isSliding=!0,this.resetDelay=!1}ngOnInit(){super.ngOnInit(),this.post?.type=="pictorial"&&(this.post?.media?.media.length||0)>1&&(this.sliderInterval=setInterval(()=>{if(this.isSliding){if(this.resetDelay){this.resetDelay=!1;return}this.nextImage()}},4e3))}ngAfterViewInit(){this.focusImage()}ngOnDestroy(){clearInterval(this.sliderInterval)}get currentImage(){return this.post?.media?.media[this.imageIndex]}get currentImagePos(){return`${this.imageIndex+1} / ${this.post?.media?.media.length}`}doSlider(){let t=this.post;return!!(t&&t.media&&t.type=="pictorial")}nextImage(){let t=this.post?.media?.media;t&&(this.imageIndex=this.imageIndex+1==t.length?0:this.imageIndex+1)}prevImage(){let t=this.post?.media?.media.length;t&&t>0&&(this.imageIndex=this.imageIndex==0?t-1:this.imageIndex-1)}focusImage(){this.imagesContainer&&this.imagesContainer.nativeElement.scrollIntoView({behavior:"instant",block:"center"})}pauseSlider(){this.isSliding=!1}resumeSlider(){this.isSliding=!0,this.resetDelay=!0}static{this.\u0275fac=function(a){return new(a||i)(P(D))}}static{this.\u0275cmp=w({type:i,selectors:[["sns-post"]],viewQuery:function(a,e){if(a&1&&b(F,5),a&2){let u;y(u=S())&&(e.imagesContainer=u.first)}},features:[M],decls:25,vars:16,consts:[["images",""],[1,"sns-post"],[1,"post-header",3,"click"],[3,"username","avatar","size"],[1,"post-header-text"],[1,"post-title",3,"title"],[1,"post-info"],[1,"author-name","author-displayname",3,"title"],[1,"author-name","author-username",3,"title"],[1,"post-date"],[1,"post-stats"],["type","button","title","Like Post","mat-fab","","extended","",1,"post-action",3,"click"],["aria-hidden","false","aria-label","like post",1,"action-like",3,"fontIcon"],["type","button","title","Comment","mat-fab","","extended","",1,"post-action",3,"click"],["aria-hidden","false","aria-label","comment post","fontIcon","comment",1,"action-comment"],[1,"post-content"],[1,"images-slider"],[1,"post-media",3,"src","title"],[1,"images-slider",3,"mouseenter","mouseleave"],[1,"slider-image-container"],[1,"image-prev",3,"click"],["inline","",1,"image-icon"],[1,"post-media",3,"click","src","title"],[1,"image-next",3,"click"],[1,"image-pos"]],template:function(a,e){a&1&&(o(0,"div",1)(1,"div",2),p("click",function(f){return e.toProfile(f)}),_(2,"sns-user-avatar",3),o(3,"div",4)(4,"span",5),s(5),r(),o(6,"div",6)(7,"span",7),s(8),r(),o(9,"span",8),s(10),r(),o(11,"span",9),s(12),r()(),o(13,"div",10)(14,"button",11),p("click",function(f){return e.fav(f)}),_(15,"mat-icon",12),s(16),r(),o(17,"button",13),p("click",function(f){return e.commentPost(f)}),_(18,"mat-icon",14),s(19),r()()()(),o(20,"div",15),O(21,Q,2,1,"p")(22,A,12,3,"div",16)(23,U,1,2,"img",17)(24,B,2,1,"p"),r()()),a&2&&(n(2),c("username",e.post.author.username)("avatar",e.post.author.avatar)("size","5rem"),n(2),c("title",e.post.title),n(),m(e.post.title),n(2),c("title",e.post.author.displayName),n(),m(e.post.author.displayName),n(),c("title",e.post.author.username),n(),m("@"+e.post.author.username),n(2),m(e.date),n(3),c("fontIcon",e.isFav()?"favorite":"favorite_border"),n(),C(" ",e.post.likes," "),n(3),C(" ",e.post.comments," "),n(2),h(e.post.type!="article"?21:-1),n(),h(e.doSlider()?22:e.post.media?23:-1),n(2),h(e.post.type=="article"?24:-1))},dependencies:[j,V,E,z,k],styles:["mat-card-actions[_ngcontent-%COMP%]{justify-content:end;gap:1rem;padding:0rem 1rem}.post[_ngcontent-%COMP%]{color:#000;border-color:var(--sns-post-border-color);border-radius:5px;overflow:hidden;background-color:var(--sns-post-bg-color)}.post[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--sns-hover-color)}.post-title[_ngcontent-%COMP%], .author-identification[_ngcontent-%COMP%], .post-date[_ngcontent-%COMP%], .post-content[_ngcontent-%COMP%], .post-summary[_ngcontent-%COMP%]{color:var(--sns-post-text-color)}.post-title[_ngcontent-%COMP%]{text-wrap:nowrap;text-overflow:ellipsis;overflow:hidden}.author-identification[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;gap:.5rem}.author-displayname[_ngcontent-%COMP%]{text-wrap:nowrap;text-overflow:ellipsis;overflow:hidden}.author-username[_ngcontent-%COMP%]{text-wrap:nowrap;color:var(--sns-username-color)}.post-media[_ngcontent-%COMP%]{max-height:700px;object-fit:cover}.post-action[_ngcontent-%COMP%]{height:1.75rem;box-shadow:none!important;background-color:transparent;color:var(--sns-post-text-color)}.post-action[_ngcontent-%COMP%]:hover{scale:1.05}.delete-post[_ngcontent-%COMP%]{position:absolute;left:1rem}.action-like[_ngcontent-%COMP%]{color:var(--sns-like-post-color)}.action-comment[_ngcontent-%COMP%]{color:var(--sns-comment-post-color)}.action-delete[_ngcontent-%COMP%]{color:red}.post-date[_ngcontent-%COMP%]{flex:1;justify-self:end;text-align:end;text-wrap:nowrap}.post-categories[_ngcontent-%COMP%]{flex:1;font-size:.9rem;display:flex;flex-flow:row nowrap;gap:.5rem;text-overflow:ellipsis}.post-categories[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.post-purpose[_ngcontent-%COMP%], .post-topic[_ngcontent-%COMP%], .post-mood[_ngcontent-%COMP%]{padding:.2rem;border:1px solid rgba(0,0,0,35%);border-radius:.3rem}.post-purpose[_ngcontent-%COMP%]{background-color:var(--sns-post-purpose-color)}.post-topic[_ngcontent-%COMP%]{background-color:var(--sns-post-topic-color)}.post-mood[_ngcontent-%COMP%]{background-color:var(--sns-post-mood-color)}.post-footer[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:.5rem}@media (max-width:1080px){.post-title[_ngcontent-%COMP%]{font-size:1.25rem}.author-identification[_ngcontent-%COMP%], .post-date[_ngcontent-%COMP%]{font-size:.9rem}.post-content[_ngcontent-%COMP%], .post-summary[_ngcontent-%COMP%]{font-size:1rem}.post-action[_ngcontent-%COMP%]{padding:.25rem}}.sns-post[_ngcontent-%COMP%]{flex:1;display:flex;flex-flow:column}.post-header[_ngcontent-%COMP%]{position:sticky;top:0;display:flex;flex-flow:row nowrap;gap:1rem;align-items:center;padding:.5rem;background-color:#1e1e1ebf;z-index:100}.post-header[_ngcontent-%COMP%]:hover{cursor:pointer}.post-header-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden;width:100%}.post-title[_ngcontent-%COMP%]{font-size:1.3rem}.post-info[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;gap:1rem;overflow:hidden}.author-name[_ngcontent-%COMP%]{font-size:1.2rem;min-width:10%}.author-username[_ngcontent-%COMP%]{color:#ffffff80}.post-title[_ngcontent-%COMP%], .author-name[_ngcontent-%COMP%]{overflow:hidden;text-wrap:nowrap;text-overflow:ellipsis}.post-date[_ngcontent-%COMP%]{font-size:1.2rem;flex-shrink:0;margin-left:auto}.post-stats[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;gap:2rem;justify-content:end}.images-slider[_ngcontent-%COMP%]{--slider-button-color: transparent;position:relative;height:100vh}.images-slider[_ngcontent-%COMP%]:hover{--slider-button-color: rgba(30, 30, 30, .75)}.slider-image-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;height:100%}.post-media[_ngcontent-%COMP%]{object-fit:contain;display:block;width:auto;max-width:100%;height:auto;max-height:100%;margin:auto}.image-prev[_ngcontent-%COMP%], .image-next[_ngcontent-%COMP%]{position:absolute;display:flex;top:50%;min-width:10%;height:100%;background-color:var(--slider-button-color);transform:translateY(-50%)}.image-prev[_ngcontent-%COMP%]:hover, .image-next[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#00000080}.image-prev[_ngcontent-%COMP%]{left:0}.image-next[_ngcontent-%COMP%]{right:0}.image-pos[_ngcontent-%COMP%]{--shadow: rgba(0, 0, 0, .75);position:absolute;left:50%;bottom:0;transform:translate(-50%);width:50%;text-shadow:1px 1px var(--shadow),1px -1px var(--shadow),-1px 1px var(--shadow),-1px -1px var(--shadow);font-size:1.2rem;text-align:center;background-color:var(--slider-button-color)}.image-icon[_ngcontent-%COMP%]{font-size:5rem;width:fit-content;height:fit-content;margin:auto}"]})}}return i})();export{J as SnsPostComponent};
