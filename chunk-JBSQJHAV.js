import{a as u,b as D,c as j}from"./chunk-PYXSOLNA.js";import{c as S,d as A,e as U,f as N,g as T,h as V,i as F,j as L}from"./chunk-22A33HRE.js";import"./chunk-RFFXWTZE.js";import"./chunk-G5XWM7GI.js";import{a as I,b as R}from"./chunk-3URJN4GV.js";import"./chunk-3QBMSCIB.js";import{b as O,d as y}from"./chunk-V2Z4YTLD.js";import"./chunk-YYLN5DU3.js";import"./chunk-HU7WFQWJ.js";import"./chunk-4B4OTB3X.js";import"./chunk-K6APHVDK.js";import"./chunk-2ZA7EJYY.js";import"./chunk-7WIWJOLM.js";import{$a as r,Db as m,Gb as w,Jb as E,Nb as a,Ob as i,Pb as c,Rb as g,Tb as l,Ub as h,Ya as M,Z as b,ab as k,dc as s,ec as p,fc as d,ka as _,la as C,lb as v,pb as x,sb as P}from"./chunk-6543YJRO.js";var z=(()=>{class n extends u{static{this.ANNOUNCEMENT_SERVICE_URL="/announcements"}constructor(){super(n.ANNOUNCEMENT_SERVICE_URL)}markAsRead(e){return this.post(`${u.SERVICE_URL+n.ANNOUNCEMENT_SERVICE_URL}/read`,e)}markAsUnread(e){return this.post(`${u.SERVICE_URL+n.ANNOUNCEMENT_SERVICE_URL}/unread`,e)}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function q(n,B){if(n&1){let e=g();a(0,"button",16),l("click",function(){_(e);let t=h();return C(t.toggleReadStatus())}),c(1,"mat-icon",17),i()}}function G(n,B){if(n&1){let e=g();a(0,"button",18),l("click",function(){_(e);let t=h();return C(t.toggleReadStatus())}),c(1,"mat-icon",19),i()}}var nt=(()=>{class n extends D{constructor(e){super(e),this.announcementService=e}isRead(){if(this.user){for(let e of this.user.read_announcements)if(e==this.post.id)return!0}return!1}toggleReadStatus(){this.user&&(this.user.read_announcements.findIndex(o=>o==this.post.id)>-1?this.markUnread():this.markRead())}markRead(){this.announcementService.markAsRead(this.post.id).subscribe(e=>{let o=e.message;this.user&&(this.user.read_announcements.push(o),this.changeRef.markForCheck())})}markUnread(){this.announcementService.markAsUnread(this.post.id).subscribe(e=>{let o=e.message;if(this.user){let t=this.user.likes.findIndex(f=>f==o);this.user.read_announcements.splice(t,1),this.changeRef.markForCheck()}})}static{this.\u0275fac=function(o){return new(o||n)(k(z))}}static{this.\u0275cmp=v({type:n,selectors:[["sns-announcement"]],features:[x],decls:32,vars:14,consts:[["appearance","outlined",1,"post","announcement"],["mat-card-avatar","",3,"src","title"],[1,"post-title",3,"title"],[1,"post-date"],[1,"author-identification"],[1,"author-displayname"],[1,"author-username"],[1,"post-content"],["overflow-auto-scroll","",1,"post-categories"],["title","Post Purpose",1,"post-purpose"],["type","button","title","Like Post","mat-fab","","extended","",1,"post-action",3,"click"],["aria-hidden","false","aria-label","like post",1,"action-like",3,"fontIcon"],["type","button","title","Comment","mat-fab","","extended","",1,"post-action",3,"click"],["aria-hidden","false","aria-label","comment post","fontIcon","comment",1,"action-comment"],["type","button","title","Mark as Unread","mat-fab","",1,"post-action"],["type","button","title","Mark as Read","mat-fab","",1,"post-action"],["type","button","title","Mark as Unread","mat-fab","",1,"post-action",3,"click"],["aria-hidden","false","aria-label","Mark as Unread","fontIcon","mark_email_read",1,"action-read"],["type","button","title","Mark as Read","mat-fab","",1,"post-action",3,"click"],["aria-hidden","false","aria-label","Mark as Read","fontIcon","mark_email_unread",1,"action-read"]],template:function(o,t){o&1&&(a(0,"mat-card",0)(1,"mat-card-header"),c(2,"img",1),a(3,"mat-card-title",2)(4,"span"),s(5),i()(),a(6,"div",3)(7,"span"),s(8),i()(),a(9,"mat-card-subtitle")(10,"div",4)(11,"span",5),s(12),i(),a(13,"span"),s(14,"|"),i(),a(15,"span",6),s(16),i()()()(),a(17,"mat-card-content",7),s(18),i(),a(19,"mat-card-actions")(20,"div",8)(21,"div",9)(22,"span"),s(23,"announcement"),i()()(),a(24,"button",10),l("click",function(){return t.fav()}),c(25,"mat-icon",11),s(26),i(),a(27,"button",12),l("click",function(){return t.commentPost()}),c(28,"mat-icon",13),s(29),i(),P(30,q,2,0,"button",14)(31,G,2,0,"button",15),i()()),o&2&&(w(t.user==null?null:t.user.customStyles),r(2),m("src",t.post.author.avatar,M)("title",t.post.author.username),r(),m("title",t.post.title),r(2),p(t.post.title),r(3),p(t.date),r(4),p(t.post.author.displayName),r(4),d("@",t.post.author.username,""),r(2),d(" ",t.post.content," "),r(7),m("fontIcon",t.isFav()?"favorite":"favorite_border"),r(),d(" ",t.post.likes," "),r(3),d(" ",t.post.comments," "),r(),E(t.isRead()?30:31))},dependencies:[L,S,T,F,U,V,N,A,R,I,y,O,j],styles:["mat-card-actions[_ngcontent-%COMP%]{justify-content:end;gap:1rem;padding:0rem 1rem}mat-card[_ngcontent-%COMP%]{background-color:#ffffff1a}.post[_ngcontent-%COMP%]{color:#000;border-color:#008b8b;border-radius:5px;overflow:hidden;--post-text-color: rgba(200, 200, 200, .8)}.post[_ngcontent-%COMP%]:hover{cursor:pointer}.post-title[_ngcontent-%COMP%], .author-identification[_ngcontent-%COMP%], .post-date[_ngcontent-%COMP%], .post-content[_ngcontent-%COMP%], .post-summary[_ngcontent-%COMP%]{color:var(--post-text-color)}.post-title[_ngcontent-%COMP%]{text-wrap:nowrap;text-overflow:ellipsis;overflow:hidden}.author-identification[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;gap:.5rem}.author-displayname[_ngcontent-%COMP%]{text-wrap:nowrap;text-overflow:ellipsis;overflow:hidden}.author-username[_ngcontent-%COMP%]{text-wrap:nowrap;opacity:65%}.post-action[_ngcontent-%COMP%]{height:1.5rem;box-shadow:none!important;background-color:transparent;color:var(--post-text-color)}.action-like[_ngcontent-%COMP%]{color:red}.action-comment[_ngcontent-%COMP%]{color:var(--post-text-color)}.post-date[_ngcontent-%COMP%]{flex:1;justify-self:end;text-align:end;text-wrap:nowrap}.post-categories[_ngcontent-%COMP%]{flex:1;font-size:.9rem;display:flex;flex-flow:row nowrap;gap:.5rem;text-overflow:ellipsis}.post-categories[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.post-purpose[_ngcontent-%COMP%], .post-topic[_ngcontent-%COMP%], .post-mood[_ngcontent-%COMP%]{padding:.2rem;border:1px solid rgba(0,0,0,35%);border-radius:.3rem}.post-purpose[_ngcontent-%COMP%]{background-color:#f0808080}.post-topic[_ngcontent-%COMP%]{background-color:#5f9ea080}.post-mood[_ngcontent-%COMP%]{background-color:#7b68ee80}.announcement[_ngcontent-%COMP%]{text-align:start}.action-read[_ngcontent-%COMP%]{color:#008b8b}"],changeDetection:0})}}return n})();export{nt as AnnouncementComponent};
