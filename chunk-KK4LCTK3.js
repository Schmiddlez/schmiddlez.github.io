import{a as A}from"./chunk-NR7K7WWT.js";import"./chunk-4SU4UW77.js";import"./chunk-AJP6ELTP.js";import"./chunk-HPQ4FWEG.js";import{a as k}from"./chunk-Q7GYF4UI.js";import{a as R,b as j,g as D,j as O,k as Q,l as B}from"./chunk-CVYHWQ3C.js";import{C as N,D as q,b as x,f as F,g as P,j as E,l as T,m as U,y as I}from"./chunk-XT72EIBI.js";import{H as C,J as V}from"./chunk-KCLKHEQV.js";import"./chunk-RVDJVD4K.js";import"./chunk-EJWSQFFV.js";import"./chunk-JLWIDV3F.js";import{b,e as _}from"./chunk-E7SDSQEU.js";import"./chunk-KE4LITEF.js";import"./chunk-76PGFOOU.js";import{Rb as h,Sb as w,Yb as r,Zb as i,db as p,dc as y,fc as u,ha as m,lc as g,ma as c,mb as l,mc as S,na as d,nc as M,ub as v,wc as a,ya as f}from"./chunk-W56RDURX.js";var $=["passwordForm"];function G(o,L){o&1&&(r(0,"mat-hint"),a(1,"Incorrect password"),i())}var me=(()=>{class o{constructor(t,e){this.router=t,this.route=e,this.verifyService=m(A),this.sessionService=m(k),this.incorrectPassword=f(!1),this.returnTo=this.route.snapshot.queryParams.returnTo}ngOnInit(){this.verifyService.requestVerification$().subscribe(t=>{})}onSubmit(){let t=this.passwordForm.value.password;this.verifyService.confirmVerification$(t).subscribe(e=>{e==!0?this.redirect():(this.incorrectPassword.set(!0),this.passwordForm.controls.password.setErrors({incorrect:!0}))})}unsetError(){this.incorrectPassword.set(!1)}redirect(){this.sessionService.newSession("secured"),this.returnTo?this.router.navigateByUrl(this.returnTo):this.router.navigate(["../home"],{relativeTo:this.route})}static{this.\u0275fac=function(e){return new(e||o)(l(_),l(b))}}static{this.\u0275cmp=v({type:o,selectors:[["sns-verify-user"]],viewQuery:function(e,n){if(e&1&&g($,5),e&2){let s;S(s=M())&&(n.passwordForm=s.first)}},decls:14,vars:1,consts:[["passwordForm","ngForm"],["id","sns-verify-user",1,"sns-verify-user"],[1,"full-content"],[1,"verify-user"],[1,"verify-form",3,"submit"],["name","password","appearance","outline"],["name","password","type","password","ngModel","","matInput","","required","","placeholder","Password...","cdkFocusInitial","",3,"change"],["mat-raised-button",""]],template:function(e,n){if(e&1){let s=y();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"form",4,0),u("submit",function(){return c(s),d(n.onSubmit())}),r(5,"h3"),a(6,"Confirm User"),i(),r(7,"mat-form-field",5)(8,"mat-label"),a(9,"Password"),i(),r(10,"input",6),u("change",function(){return c(s),d(n.unsetError())}),i(),h(11,G,2,0,"mat-hint"),i(),r(12,"button",7),a(13,"Submit"),i()()()()()}e&2&&(p(11),w(n.incorrectPassword()?11:-1))},dependencies:[N,U,x,F,P,I,T,E,q,B,Q,D,R,j,V,C,O],styles:["#sns-verify-user[_ngcontent-%COMP%]{position:relative;display:flex;flex-flow:row nowrap;justify-content:center;width:100%;max-height:100%}.verify-user[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.verify-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;min-width:10rem;max-width:30rem;width:100%;margin:auto;margin-top:3rem;padding:2rem;background-color:var(--sns-post-bg-color);border:1px solid rgb(200,200,200);border-radius:3px;color:var(--sns-text-color)}"]})}}return o})();export{me as SnsVerifyUserComponent};
