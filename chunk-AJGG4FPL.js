import{c as o}from"./chunk-B6GQN5TU.js";import{da as n,k as h}from"./chunk-X7EC65UH.js";var a=class{constructor(e,i,t){this.oauthUrl=e,this.tokenUrl=i,this.refreshUrl=t,this.POPUP_WIDTH=500,this.POPUP_HEIGHT=650,this.http=n(o),this.tokensRecieved=new h(1),this.tokensRecieved$=this.tokensRecieved.asObservable()}login(){this.http.get(`${this.oauthUrl}`,{withCredentials:!0}).subscribe({next:e=>{this.beginExchange(e)},error:e=>{}})}getTokens$(e){return this.http.get(`${this.tokenUrl}?code=${e}`,{withCredentials:!0})}refreshTokens$(e){return this.http.get(`${this.refreshUrl}?refreshToken=${e}`,{withCredentials:!0})}beginExchange(e){if(e&&e!=""){let i=window.open(e,"popup",`popup=true, width=${this.POPUP_WIDTH}, height=${this.POPUP_HEIGHT}`),t=this.tokensRecieved,s=function(r){r.data.access_token&&(t.next(r.data),window.removeEventListener("message",s))};window.addEventListener("message",s)}}};export{a};
