import{f as le,h as de}from"./chunk-6JF2DGDE.js";import{a as ce}from"./chunk-Q7GYF4UI.js";import{a as m}from"./chunk-7E7XWTTT.js";import{a as ae}from"./chunk-EJWSQFFV.js";import{a as l}from"./chunk-JLWIDV3F.js";import{c as oe,f as re,h as ne,i as ie,j as se}from"./chunk-E7SDSQEU.js";import{a as Q,b as q,f as ee,g as te}from"./chunk-KE4LITEF.js";import"./chunk-76PGFOOU.js";import{$ as x,G as y,Hc as X,Ma as U,Rb as $,Sb as J,Tb as V,Vb as Z,Wb as H,X as b,Xb as Y,Yb as h,Yc as K,Zb as u,_b as G,a as S,b as T,ca as M,db as d,fa as F,ha as s,hb as j,hc as A,ia as E,kb as z,mb as L,nb as B,qa as N,r as g,ra as D,ub as v,va as O,vc as W,wc as k,xc as C,za as P}from"./chunk-W56RDURX.js";var Ae="@",we=(()=>{class e{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=s(N);loadingSchedulerFn=s(_e,{optional:!0});_engine;constructor(t,r,n,i,a){this.doc=t,this.delegate=r,this.zone=n,this.animationType=i,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-OJUQKC3Z.js").then(n=>n),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(t):r=t(),r.catch(n=>{throw new x(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:i})=>{this._engine=n(this.animationType,this.doc);let a=new i(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(t,r){let n=this.delegate.createRenderer(t,r);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let i=new w(n);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(t,r);i.use(c),this.scheduler??=this.injector.get(P,null,{optional:!0}),this.scheduler?.notify(10)}).catch(a=>{i.use(n)}),i}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(t){this._engine?.flush(),this.delegate.componentReplaced?.(t)}static \u0275fac=function(r){B()};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),w=class{delegate;replay=[];\u0275type=1;constructor(o){this.delegate=o}use(o){if(this.delegate=o,this.replay!==null){for(let t of this.replay)t(o);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(o,t){return this.delegate.createElement(o,t)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}get destroyNode(){return this.delegate.destroyNode}appendChild(o,t){this.delegate.appendChild(o,t)}insertBefore(o,t,r,n){this.delegate.insertBefore(o,t,r,n)}removeChild(o,t,r,n){this.delegate.removeChild(o,t,r,n)}selectRootElement(o,t){return this.delegate.selectRootElement(o,t)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,t,r,n){this.delegate.setAttribute(o,t,r,n)}removeAttribute(o,t,r){this.delegate.removeAttribute(o,t,r)}addClass(o,t){this.delegate.addClass(o,t)}removeClass(o,t){this.delegate.removeClass(o,t)}setStyle(o,t,r,n){this.delegate.setStyle(o,t,r,n)}removeStyle(o,t,r){this.delegate.removeStyle(o,t,r)}setProperty(o,t,r){this.shouldReplay(t)&&this.replay.push(n=>n.setProperty(o,t,r)),this.delegate.setProperty(o,t,r)}setValue(o,t){this.delegate.setValue(o,t)}listen(o,t,r,n){return this.shouldReplay(t)&&this.replay.push(i=>i.listen(o,t,r,n)),this.delegate.listen(o,t,r,n)}shouldReplay(o){return this.replay!==null&&o.startsWith(Ae)}},_e=new F("");function R(e="animations"){return j("NgAsyncAnimations"),E([{provide:z,useFactory:()=>new we(s(D),s(Q),s(O),e)},{provide:U,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var ue=[{path:"mudae",title:"Mudae Tracker",loadChildren:()=>import("./chunk-SLFDSBOH.js").then(e=>e.mudaeRoutes)},{path:"loa-assistant",title:"Loa Assistant",loadChildren:()=>import("./chunk-N6CWGJSR.js").then(e=>e.loaRoutes)},{path:"sns",title:"Sns App",loadChildren:()=>import("./chunk-GC6IACSL.js").then(e=>e.snsRoutes)},{path:"resume",title:"Resume App",loadChildren:()=>import("./chunk-4HNAC2A4.js").then(e=>e.resumeRoutes)},{path:"comic",title:"Comic App",loadChildren:()=>import("./chunk-RLBJ2GQV.js").then(e=>e.comicRoutes)},{path:"**",redirectTo:"/mudae",pathMatch:"full"}];function me(e,o){let t=l.loa();return e.url.includes(t)?o(Ie(e)):o(e)}function Ie(e){let t=s(m).get("loa-tokens");if(t){let i=JSON.parse(t).access_token;var r=e.headers.append("Authorization","Bearer "+i);return e.clone({headers:r})}return e}function he(e,o){let t=l.resume();return e.url.includes(t)?o(Se(e)):o(e)}function Se(e){let t=s(m).get("resume_token");if(t){var r=e.headers.append("Authorization","Bearer "+t);return e.clone({headers:r})}return e}function fe(e,o){let t=l.sns(),r=s(ce);return e.url.includes(t)?o(e).pipe(y(n=>{let i=n.status;return!n.error&&i===403&&r.sessionExpired("login"),g(()=>n)})):o(e)}function ge(e,o){let t=l.mudae();return e.url.includes(t)?o(Te(e)):o(e)}function Te(e){let t=s(m).get("mudae-tokens"),r=/\/updates\/([A-Za-z0-9]+)/,n=/\/claims\/([0-9]+)/;if(t&&t!="anonymous"){let c=JSON.parse(t).access_token;if(c){var i=e.headers.append("Authorization","Bearer "+c);return e.clone({headers:i,withCredentials:!0})}}else{var i=e.headers.append("Authorization","Bearer anonymous");let c=e.url.replace(`${l.mudae()}/api`,"");return e.clone({headers:i,withCredentials:!0})}return e}function ye(e,o){let t=l.comic();return e.url.includes(t)?xe(e,o):o(e)}var be=["login","register","logout","comic","comics","refreshToken","comicData"];function xe(e,o){let t=s(de),r=s(le),n=r.getToken(),i=e.body;var a=e;if(n&&!be.includes(i.meta||"")){if(n.accessToken){var c=e.headers.append("Authorization","Bearer "+n.accessToken);a=e.clone({headers:c,withCredentials:!0})}}else{var c=e.headers.append("Authorization","Bearer "+(n?n.accessToken:"anonymous"));a=e.clone({headers:c,withCredentials:!0})}return o(a).pipe(y(p=>{let I=e.body;if(p.status==401&&!I.query.includes("refreshToken")){if(n?.refreshToken)return t.refreshToken$(n.refreshToken).pipe(b(f=>{r.storeToken(f);var Ce=e.headers.set("Authorization","Bearer "+f.accessToken);let Re=e.clone({headers:Ce});return o(Re)}))}else if(p.status==401){r.clearToken(),c=e.headers.delete("Authorization");let f=e.clone({headers:c,withCredentials:!0});return o(f)}return g(()=>p)}))}var _={providers:[ne(ue,se(),ie({scrollPositionRestoration:"enabled"})),R(),ee(te([ge,he,me,fe,ye])),R(),R()]};var Me=e=>[e];function Fe(e,o){if(e&1&&(h(0,"div")(1,"a",5),k(2),u()()),e&2){let t=A().$implicit;d(),Y("routerLink",X(2,Me,t.link)),d(),C(t.linkText||t.link)}}function Ee(e,o){if(e&1&&(h(0,"div",2)(1,"div",3)(2,"strong")(3,"h5"),k(4),u()()(),h(5,"div",4)(6,"div"),k(7),u(),$(8,Fe,3,4,"div"),u()()),e&2){let t=o.$implicit,r=A();W(r.getNotificationClass(t)),d(4),C(t.header),d(3),C(t.body),d(),J(t.link?8:-1)}}var ve=(()=>{class e{constructor(t){this.toastService=t}ngOnInit(){this.toasts=this.toastService.toasts}getNotificationClass(t){var r="alert";switch(t.type){case"success":r+=" alert-success";break;case"warning":r+=" alert-warning";break;case"danger":r+=" alert-danger";break;case"etc":r+=" alert-secondary";break}return t.classname&&(r+=` ${t.classname}`),r}static{this.\u0275fac=function(r){return new(r||e)(L(ae))}}static{this.\u0275cmp=v({type:e,selectors:[["toast-list"]],decls:3,vars:0,consts:[[1,"toast-list","position-fixed","bottom-1r","end-1r"],["role","alert","aria-live","polite","aria-atomic","true",3,"class"],["role","alert","aria-live","polite","aria-atomic","true"],[1,"alert-heading"],[1,"toast-body"],[1,"text-primary","toast-link",3,"routerLink"]],template:function(r,n){r&1&&(h(0,"div",0),Z(1,Ee,9,5,"div",1,V),u()),r&2&&(d(),H(n.toasts))},dependencies:[re],styles:[".toast-list[_ngcontent-%COMP%]{position:fixed;right:1rem;bottom:1rem;opacity:.85;z-index:3000;pointer-events:none}.toast-link[_ngcontent-%COMP%]{pointer-events:all;cursor:pointer}"]})}}return e})();var ke=(()=>{class e{constructor(){this.title="mudae-tracker"}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(r,n){r&1&&G(0,"router-outlet")(1,"toast-list")},dependencies:[oe,ve],encapsulation:2})}}return e})();q(ke,T(S({},_),{providers:[K(),..._.providers]})).catch(e=>console.error(e));
