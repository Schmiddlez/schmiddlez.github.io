import{a as m}from"./chunk-V2WTJHAE.js";import{b as q}from"./chunk-NTGWZLDD.js";import{a as ee}from"./chunk-C5RMYWSX.js";import{a as l}from"./chunk-P4ZELJWN.js";import{c as Z,e as W,g as X,h as Q}from"./chunk-CG5ODPV4.js";import{c as G,d as V,e as H,f as K}from"./chunk-OQ23N4OO.js";import{d as $,m as J}from"./chunk-MB2EZ7OD.js";import{$ as k,Da as b,Ib as P,La as M,Mb as D,Ob as U,Pb as L,Rb as j,Sb as z,Tb as u,Ub as p,Vb as B,Z as R,_b as A,ca as S,cb as c,db as N,eb as F,fa as a,ga as I,hb as O,jc as g,kc as y,pb as f,rc as Y,sa as w,va as x,wb as E,ya as T}from"./chunk-UUT3EF6T.js";var pe="@",me=(()=>{class t{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=a(w);loadingSchedulerFn=a(ue,{optional:!0});_engine;constructor(e,r,n,i,s){this.doc=e,this.delegate=r,this.zone=n,this.animationType=i,this.moduleImpl=s}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-IQNSVRLD.js").then(n=>n),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(e):r=e(),r.catch(n=>{throw new R(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:i})=>{this._engine=n(this.animationType,this.doc);let s=new i(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(e,r){let n=this.delegate.createRenderer(e,r);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let i=new C(n);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(s=>{let _=s.createRenderer(e,r);i.use(_),this.scheduler??=this.injector.get(x,null,{optional:!0}),this.scheduler?.notify(11)}).catch(s=>{i.use(n)}),i}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(r){F()};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})(),C=class{delegate;replay=[];\u0275type=1;constructor(o){this.delegate=o}use(o){if(this.delegate=o,this.replay!==null){for(let e of this.replay)e(o);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(o,e){return this.delegate.createElement(o,e)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}get destroyNode(){return this.delegate.destroyNode}appendChild(o,e){this.delegate.appendChild(o,e)}insertBefore(o,e,r,n){this.delegate.insertBefore(o,e,r,n)}removeChild(o,e,r){this.delegate.removeChild(o,e,r)}selectRootElement(o,e){return this.delegate.selectRootElement(o,e)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,e,r,n){this.delegate.setAttribute(o,e,r,n)}removeAttribute(o,e,r){this.delegate.removeAttribute(o,e,r)}addClass(o,e){this.delegate.addClass(o,e)}removeClass(o,e){this.delegate.removeClass(o,e)}setStyle(o,e,r,n){this.delegate.setStyle(o,e,r,n)}removeStyle(o,e,r){this.delegate.removeStyle(o,e,r)}setProperty(o,e,r){this.shouldReplay(e)&&this.replay.push(n=>n.setProperty(o,e,r)),this.delegate.setProperty(o,e,r)}setValue(o,e){this.delegate.setValue(o,e)}listen(o,e,r,n){return this.shouldReplay(e)&&this.replay.push(i=>i.listen(o,e,r,n)),this.delegate.listen(o,e,r,n)}shouldReplay(o){return this.replay!==null&&o.startsWith(pe)}},ue=new S("");function v(t="animations"){return b("NgAsyncAnimations"),I([{provide:O,useFactory:(o,e,r)=>new me(o,e,r,t),deps:[$,H,T]},{provide:M,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var oe=[{path:"mudae",title:"Mudae Tracker",loadChildren:()=>import("./chunk-ZUNMJACI.js").then(t=>t.mudaeRoutes)},{path:"loa-assistant",title:"Loa Assistant",loadChildren:()=>import("./chunk-XMGBATDZ.js").then(t=>t.loaRoutes)},{path:"sns",title:"Sns App",loadChildren:()=>import("./chunk-VPVD2BY3.js").then(t=>t.snsRoutes)},{path:"resume",title:"Resume App",loadChildren:()=>import("./chunk-DF6UNT22.js").then(t=>t.resumeRoutes)},{path:"**",redirectTo:"/mudae",pathMatch:"full"}];function re(t,o){let e=l.loa();return t.url.includes(e)?o(he(t)):o(t)}function he(t){let e=a(m).get("loa-tokens");if(e){let i=JSON.parse(e).access_token;var r=t.headers.append("Authorization","Bearer "+i);return t.clone({headers:r})}return t}var ne="mudae-anonymous-user";function se(t,o){let e=l.mudae();return t.url.includes(e)?o(ge(t)):o(t)}var fe=["/characters/favorite","/characters/unfavorite","/characters/unclaimed","/characters/owned","/characters/lost","/users/@me"];function ge(t){let e=a(m).get("mudae-tokens"),r=/\/updates\/([A-Za-z0-9]+)/,n=/\/claims\/([0-9]+)/;if(e&&e!="anonymous"){let d=JSON.parse(e).access_token;if(d){var i=t.headers.append("Authorization","Bearer "+d);return t.clone({headers:i,withCredentials:!0})}}else{var i=t.headers.append("Authorization","Bearer anonymous");let d=t.url.replace(`${l.mudae()}/api`,"");if(r.test(d)||n.test(d)){let h=localStorage.getItem(ne);var s=q();return h&&(s=JSON.parse(h)),t.clone({url:ie(t),method:"POST",body:s,headers:i,withCredentials:!0})}else return t.clone({url:fe.includes(d)?ie(t):t.url,headers:i,withCredentials:!0})}return t}function ie(t){return t.url.replace(`${l.mudae()}/api`,`${l.mudae()}/api/anonymous`)}function ae(t,o){let e=l.resume();return t.url.includes(e)?o(ye(t)):o(t)}function ye(t){let e=a(m).get("resume_token");if(e){var r=t.headers.append("Authorization","Bearer "+e);return t.clone({headers:r})}return t}var le={providers:[X(oe,Q({scrollPositionRestoration:"enabled"})),v(),G(V([se,ae,re])),v(),v()]};var ve=t=>[t];function Ae(t,o){if(t&1&&(u(0,"div")(1,"a",5),g(2),p()()),t&2){let e=A().$implicit;c(),P("routerLink",Y(2,ve,e.link)),c(),y(e.linkText||e.link)}}function Ce(t,o){if(t&1&&(u(0,"div",2)(1,"div",3)(2,"strong")(3,"h5"),g(4),p()()(),u(5,"div",4)(6,"div"),g(7),p(),E(8,Ae,3,4,"div"),p()()),t&2){let e=o.$implicit,r=A();D(r.getNotificationClass(e)),c(4),y(e.header),c(3),y(e.body),c(),U(e.link?8:-1)}}var ce=(()=>{class t{constructor(e){this.toastService=e}ngOnInit(){this.toasts=this.toastService.toasts}getNotificationClass(e){var r="alert";switch(e.type){case"success":r+=" alert-success";break;case"warning":r+=" alert-warning";break;case"danger":r+=" alert-danger";break;case"etc":r+=" alert-secondary";break}return e.classname&&(r+=` ${e.classname}`),r}static{this.\u0275fac=function(r){return new(r||t)(N(ee))}}static{this.\u0275cmp=f({type:t,selectors:[["toast-list"]],decls:3,vars:0,consts:[[1,"toast-list","position-fixed","bottom-1r","end-1r"],["role","alert","aria-live","polite","aria-atomic","true",3,"class"],["role","alert","aria-live","polite","aria-atomic","true"],[1,"alert-heading"],[1,"toast-body"],[1,"text-primary","toast-link",3,"routerLink"]],template:function(r,n){r&1&&(u(0,"div",0),j(1,Ce,9,5,"div",1,L),p()),r&2&&(c(),z(n.toasts))},dependencies:[J,W],styles:[".toast-list[_ngcontent-%COMP%]{position:fixed;right:1rem;bottom:1rem;opacity:.85;z-index:3000;pointer-events:none}.toast-link[_ngcontent-%COMP%]{pointer-events:all;cursor:pointer}"]})}}return t})();var de=(()=>{class t{constructor(){this.title="mudae-tracker"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=f({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(r,n){r&1&&B(0,"router-outlet")(1,"toast-list")},dependencies:[Z,ce],encapsulation:2})}}return t})();K(de,le).catch(t=>console.error(t));
