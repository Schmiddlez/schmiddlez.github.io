import{a as k,b as A}from"./chunk-7CRKY2PJ.js";import"./chunk-JSS3FXEQ.js";import"./chunk-AJP6ELTP.js";import"./chunk-NHPZMVIP.js";import{a as R,b as j,g as O,h as Q,i as B,j as D}from"./chunk-4P6JCT6G.js";import{B as N,C as q,b as x,f as F,g as P,i as E,k as T,l as U,w as I}from"./chunk-ESTKDGOR.js";import"./chunk-HU7WFQWJ.js";import{a as V,d as C}from"./chunk-RA5YA7SP.js";import"./chunk-AE4C5XQ6.js";import"./chunk-C5RMYWSX.js";import"./chunk-JLWIDV3F.js";import{b as _,d as b}from"./chunk-CG5ODPV4.js";import"./chunk-OQ23N4OO.js";import"./chunk-MB2EZ7OD.js";import{Fa as f,Ob as w,Tb as r,Ub as i,Xb as y,Zb as d,cb as p,db as c,dc as g,ec as S,fa as m,fc as M,jc as a,ma as l,na as u,pb as h,wb as v}from"./chunk-UUT3EF6T.js";var $=["passwordForm"];function G(o,L){o&1&&(r(0,"mat-hint"),a(1,"Incorrect password"),i())}var le=(()=>{class o{constructor(t,e){this.router=t,this.route=e,this.verifyService=m(A),this.sessionService=m(k),this.incorrectPassword=f(!1),this.returnTo=this.route.snapshot.queryParams.returnTo}ngOnInit(){this.verifyService.requestVerification$().subscribe(t=>{})}onSubmit(){let t=this.passwordForm.value.password;this.verifyService.confirmVerification$(t).subscribe(e=>{e==!0?this.redirect():(this.incorrectPassword.set(!0),this.passwordForm.controls.password.setErrors({incorrect:!0}))})}unsetError(){this.incorrectPassword.set(!1)}redirect(){this.sessionService.newSession("secured"),this.returnTo?this.router.navigateByUrl(this.returnTo):this.router.navigate(["../home"],{relativeTo:this.route})}static{this.\u0275fac=function(e){return new(e||o)(c(b),c(_))}}static{this.\u0275cmp=h({type:o,selectors:[["sns-verify-user"]],viewQuery:function(e,s){if(e&1&&g($,5),e&2){let n;S(n=M())&&(s.passwordForm=n.first)}},decls:14,vars:1,consts:[["passwordForm","ngForm"],["id","sns-verify-user",1,"sns-verify-user"],[1,"full-content"],[1,"verify-user"],[1,"verify-form",3,"submit"],["name","password","appearance","outline"],["name","password","type","password","ngModel","","matInput","","required","","placeholder","Password...","cdkFocusInitial","",3,"change"],["mat-raised-button",""]],template:function(e,s){if(e&1){let n=y();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"form",4,0),d("submit",function(){return l(n),u(s.onSubmit())}),r(5,"h3"),a(6,"Confirm User"),i(),r(7,"mat-form-field",5)(8,"mat-label"),a(9,"Password"),i(),r(10,"input",6),d("change",function(){return l(n),u(s.unsetError())}),i(),v(11,G,2,0,"mat-hint"),i(),r(12,"button",7),a(13,"Submit"),i()()()()()}e&2&&(p(11),w(s.incorrectPassword()?11:-1))},dependencies:[N,U,x,F,P,I,T,E,q,D,B,O,R,j,C,V,Q],styles:["#sns-verify-user[_ngcontent-%COMP%]{position:relative;display:flex;flex-flow:row nowrap;justify-content:center;width:100%;max-height:100%}.verify-user[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.verify-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;min-width:10rem;max-width:30rem;width:100%;margin:auto;margin-top:3rem;padding:2rem;background-color:var(--sns-post-bg-color);border:1px solid rgb(200,200,200);border-radius:3px;color:var(--sns-text-color)}"]})}}return o})();export{le as SnsVerifyUserComponent};
