import{a as g,b as f,e as h,g as v,j as M}from"./chunk-QKYLMYUG.js";import{a as L}from"./chunk-HPQ4FWEG.js";import{H as p,J as u}from"./chunk-KCLKHEQV.js";import{e as E}from"./chunk-E7SDSQEU.js";import{Rb as k,S as $,Sb as A,Yb as n,Zb as r,ca as w,db as d,dc as D,fc as l,ha as C,hc as O,ma as I,mb as a,na as S,u as T,ub as m,wc as s,xc as x,zb as b}from"./chunk-W56RDURX.js";var j=(()=>{class o{constructor(){this.resourceUrl="/auth",this.http=C(L)}login$(t,e){return this.http.get$(`${this.resourceUrl}/login?username=${t}&password=${e}`)}logout$(){return this.http.get$(`${this.resourceUrl}/logout`)}register$(t,e,i,c){let y={username:t,password:e,displayName:i,questions:c};return this.http.post$(`${this.resourceUrl}/register`,y)}isLoggedIn$(){return this.http.get$(`${this.resourceUrl}/isLoggedIn`).pipe(T(t=>t.message=="true"))}forgotPassword$(t){return this.http.post$(`${this.resourceUrl}/password/forgot`,t)}resetPassword$(t,e,i,c){let y=this.questionsArrayToMap(c);return this.http.post$(`${this.resourceUrl}/password/reset`,{username:t,newPassword:e,confirmedPassword:i,questions:y})}refresh(){this.http.refreshCsrf()}questionsArrayToMap(t){return t.reduce((e,i)=>(e[i.question]=i.answer,e),{})}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var et=(()=>{class o extends M{constructor(t,e){super(),this.data=t,this.dialogRef=e,this.authService=C(j),this.hasLoggedOut=!1}ngOnInit(){}logout(){this.authService.logout$().pipe($(3)).subscribe({next:t=>{console.log(t),this.hasLoggedOut=!0,this.router.navigate(["/sns/logout"])},error:t=>{console.log(t)}})}close(){this.dialogRef.close({hasLoggedOut:this.hasLoggedOut})}static{this.\u0275fac=function(e){return new(e||o)(a(f),a(g))}}static{this.\u0275cmp=m({type:o,selectors:[["logout-promt"]],features:[b],decls:13,vars:0,consts:[[1,"logout-prompt"],[1,"logout-prompt-header"],[1,"logout-prompt-content"],["mat-flat-button","",1,"return-btn",3,"click"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h5"),s(4,"Logout"),r()()(),n(5,"mat-dialog-content")(6,"div",2)(7,"div"),s(8,"Are you sure you wish to logout?"),r(),n(9,"button",3),l("click",function(){return i.logout()}),s(10,"Logout"),r(),n(11,"button",3),l("click",function(){return i.close()}),s(12,"Cancel"),r()()()())},dependencies:[v,h,u,p],styles:[".logout-prompt[_ngcontent-%COMP%]{padding:1rem 0rem;box-sizing:border-box}.logout-prompt-header[_ngcontent-%COMP%]{padding:0rem 1rem;border-bottom:1px solid rgba(30,30,30,.5)}.logout-prompt-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;font-size:1.25rem;text-align:center}.return-btn[_ngcontent-%COMP%]{border-radius:3px}"]})}}return o})();function U(o){return o.split(" ").map(_=>_.charAt(0).toUpperCase()+_.substring(1)).join(" ")}function q(o,_){if(o&1){let t=D();n(0,"div",3)(1,"div"),s(2,"Your login session has expired. Please login again."),r(),n(3,"button",4),l("click",function(){I(t);let i=O();return S(i.return())}),s(4,"Return to login"),r()()}}function z(o,_){if(o&1){let t=D();n(0,"div",3)(1,"div"),s(2,"Your session has expired. Please re-confirm your password."),r(),n(3,"button",4),l("click",function(){I(t);let i=O();return S(i.return())}),s(4,"Return to confirm Password"),r()()}}var lt=(()=>{class o{constructor(t,e,i){this.data=t,this.dialogRef=e,this.router=i}ngOnInit(){}get title(){return U(`${this.data.session} session expired`)}return(){switch(this.dialogRef.close(),this.data.session){case"login":this.router.navigate(["/sns/login"],{queryParams:{returnTo:this.router.routerState.snapshot.url}});break;case"secured":this.router.navigate(["/sns/confirm-user"],{queryParams:{returnTo:this.router.routerState.snapshot.url}});break}}static{this.\u0275fac=function(e){return new(e||o)(a(f),a(g),a(E))}}static{this.\u0275cmp=m({type:o,selectors:[["session-expired"]],decls:8,vars:2,consts:[[1,"session-expired"],[1,"expired-header"],[1,"change-title"],[1,"expired-content"],["mat-flat-button","",1,"return-btn",3,"click"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),s(4),r()()(),n(5,"mat-dialog-content"),k(6,q,5,0,"div",3)(7,z,5,0,"div",3),r()()),e&2&&(d(4),x(i.title),d(2),A(i.data.session=="login"?6:i.data.session=="secured"?7:-1))},dependencies:[v,h,u,p],styles:[".session-expired[_ngcontent-%COMP%]{padding:1rem 0rem;box-sizing:border-box}.expired-header[_ngcontent-%COMP%]{padding:0rem 1rem;border-bottom:1px solid rgba(30,30,30,.5)}.expired-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;font-size:1.25rem;text-align:center}.return-btn[_ngcontent-%COMP%]{border-radius:3px}"]})}}return o})();var ut=(()=>{class o extends M{constructor(t,e){super(),this.data=t,this.dialogRef=e}ngOnInit(){}close(){}nav(){this.dialogRef.close(),this.data.navLink&&this.data.navLink!=""&&this.router.navigate([this.data.navLink])}static{this.\u0275fac=function(e){return new(e||o)(a(f),a(g))}}static{this.\u0275cmp=m({type:o,selectors:[["confirm-before-nav"]],features:[b],decls:11,vars:2,consts:[[1,"confirm"],[1,"confirm-header"],[1,"confirm-content"],["mat-flat-button","",1,"nav-btn",3,"click"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h5"),s(4,"Confirmation"),r()()(),n(5,"mat-dialog-content")(6,"div",2)(7,"div"),s(8),r(),n(9,"button",3),l("click",function(){return i.nav()}),s(10),r()()()()),e&2&&(d(8),x(i.data.confirmText),d(2),x(i.data.navText))},dependencies:[v,h,u,p],styles:[".confirm[_ngcontent-%COMP%]{padding:1rem 0rem;box-sizing:border-box}.confirm-header[_ngcontent-%COMP%]{padding:0rem 1rem;border-bottom:1px solid rgba(30,30,30,.5)}.confirm-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;font-size:1.25rem;text-align:center}.nav-btn[_ngcontent-%COMP%]{border-radius:3px}"]})}}return o})();export{j as a,et as b,lt as c,ut as d};
