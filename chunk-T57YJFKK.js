import{a as y}from"./chunk-4SU4UW77.js";import"./chunk-AJP6ELTP.js";import{a as V}from"./chunk-FW3RU6FN.js";import"./chunk-YLX6JSE3.js";import"./chunk-HPQ4FWEG.js";import"./chunk-EJWSQFFV.js";import"./chunk-JLWIDV3F.js";import{b}from"./chunk-E7SDSQEU.js";import"./chunk-KE4LITEF.js";import"./chunk-76PGFOOU.js";import{Bb as w,Jb as C,Kb as v,Rb as x,Sb as g,Xb as c,Yb as p,Zb as d,_b as a,db as r,dc as S,fc as P,ha as m,hc as s,ma as f,mb as u,na as h,ub as _}from"./chunk-W56RDURX.js";var M=()=>[import("./chunk-E243OZWV.js").then(t=>t.SnsPostComponent),import("./chunk-MRDPMGRK.js").then(t=>t.SnsPostCommentsComponent)];function O(t,l){if(t&1){let e=S();p(0,"sns-post",1),P("onComment",function(i){f(e);let o=s(2);return h(o.onComment(i))}),d(),a(1,"sns-post-comments",2)}if(t&2){let e=s(2);c("post",e.post)("user",e.me()),r(),c("comments",e.comments)("user",e.me())}}function T(t,l){if(t&1&&x(0,O,2,4),t&2){let e=s();g(e.post?0:-1)}}function I(t,l){t&1&&a(0,"div",3)(1,"div",4)}var U=(()=>{class t{constructor(e){this.route=e,this.userService=m(y),this.postService=m(V),this.comments=[],this.subs=[],this.me=this.userService.me$}ngOnInit(){let e=this.route.params.subscribe(n=>{let i=n.id;this.postService.getById$(i).subscribe(o=>{this.post=o}),this.postService.getComments$(i).subscribe(o=>{this.comments=o})});this.subs.push(e)}ngOnDestroy(){for(let e of this.subs)e.unsubscribe()}onComment(e){this.comments=[e,...this.comments]}appendComments(e,n){let i=[...e];for(let o of n)e.findIndex(D=>D.id==o.id)<0&&i.push(o);return i}static{this.\u0275fac=function(n){return new(n||t)(u(b))}}static{this.\u0275cmp=_({type:t,selectors:[["sns-view-post"]],decls:5,vars:1,consts:[["id","sns-view-post"],[1,"main-content",3,"onComment","post","user"],[1,"side-content",3,"comments","user"],[1,"main-content"],[1,"side-content"]],template:function(n,i){n&1&&(p(0,"div",0),w(1,T,1,1)(2,I,2,0),C(3,1,M,null,2),d()),n&2&&(r(3),v(i.post!=null))},styles:["#sns-view-post[_ngcontent-%COMP%]{position:relative;display:flex;flex-flow:row nowrap;justify-content:center;width:100%}.page-placeholder[_ngcontent-%COMP%]{flex:1;min-width:30rem;width:100vw;max-width:65rem}@media(max-width:1080px){sns-post[_ngcontent-%COMP%]{min-width:10rem;padding-right:1rem}.side-content[_ngcontent-%COMP%]{margin:auto;width:calc(100vw - (var(--nav-width) + 2rem))!important;max-width:unset!important;border-top:3px solid rgba(255,255,255,.5)}#sns-view-post[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.page-placeholder[_ngcontent-%COMP%]{flex:1;min-width:30rem;width:100vw;max-width:45rem}}"]})}}return t})();export{U as SnsViewPostComponent};
