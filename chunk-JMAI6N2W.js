import{a as m}from"./chunk-ICVGEICJ.js";import{a as n}from"./chunk-V2WTJHAE.js";import{a}from"./chunk-C5RMYWSX.js";import{d as u}from"./chunk-CG5ODPV4.js";import{$ as c,fa as o,r as s}from"./chunk-UUT3EF6T.js";var b=(()=>{class t{constructor(){this.router=o(u),this.resumeHttp=o(m),this.toastService=o(a),this.cookies=o(n)}login(i,r){return this.resumeHttp.post("/authenticate",{username:i,password:r}).pipe(s(e=>e)).subscribe({next:e=>{this.cookies.delete("resume_token"),this.cookies.set("resume_token",e.token),this.cookies.delete("resume_public_key"),this.cookies.set("resume_public_key",e.public),this.router.navigate(["/resume/admin"])},error:e=>{console.log(e),e.status==0?this.toastService.show({type:"danger",source_feature:"resume",header:"Error",body:"Could not connect to authentication server"}):this.toastService.show({type:"danger",source_feature:"resume",header:"Error",body:"Invalid Credentials"})}})}logout(){this.cookies.delete("resume_token"),this.cookies.delete("resume_public_key"),console.log("logged out")}verify(){return this.resumeHttp.get("/verify")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{b as a};
