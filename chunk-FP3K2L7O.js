import{a as k,b as A}from"./chunk-COWYPX6I.js";import"./chunk-RZGKKGXP.js";import"./chunk-CRXCR2JF.js";import"./chunk-YR2LWUA2.js";import{a as R,b as Q,g as j,h as B,i as D,j as O}from"./chunk-N7TBWEAR.js";import{a as V,d as C}from"./chunk-NPZLEDH6.js";import"./chunk-WTDRPXX3.js";import"./chunk-HU7WFQWJ.js";import{b as F,e as x,f as E,h as P,j as T,k as U,u as I,y as N,z as q}from"./chunk-HUAPMYXL.js";import"./chunk-LUEFBJHU.js";import"./chunk-GT3HK5I6.js";import{b,d as _}from"./chunk-KVX4MIOR.js";import"./chunk-5V4PC647.js";import"./chunk-OOKV5ZR5.js";import{Da as p,Lb as w,Qb as r,Rb as i,Ub as y,Wb as l,ab as f,ac as S,bb as d,bc as g,cc as M,da as m,gc as a,ka as c,la as u,mb as h,tb as v}from"./chunk-3AA7O2RR.js";var $=["passwordForm"];function G(o,L){o&1&&(r(0,"mat-hint"),a(1,"Incorrect password"),i())}var ce=(()=>{class o{constructor(t,e){this.router=t,this.route=e,this.verifyService=m(A),this.sessionService=m(k),this.incorrectPassword=p(!1),this.returnTo=this.route.snapshot.queryParams.returnTo}ngOnInit(){this.verifyService.requestVerification$().subscribe(t=>{})}onSubmit(){let t=this.passwordForm.value.password;this.verifyService.confirmVerification$(t).subscribe(e=>{e==!0?this.redirect():(this.incorrectPassword.set(!0),this.passwordForm.controls.password.setErrors({incorrect:!0}))})}unsetError(){this.incorrectPassword.set(!1)}redirect(){this.sessionService.newSession("secured"),this.returnTo?this.router.navigateByUrl(this.returnTo):this.router.navigate(["../home"],{relativeTo:this.route})}static{this.\u0275fac=function(e){return new(e||o)(d(_),d(b))}}static{this.\u0275cmp=h({type:o,selectors:[["sns-verify-user"]],viewQuery:function(e,s){if(e&1&&S($,5),e&2){let n;g(n=M())&&(s.passwordForm=n.first)}},decls:13,vars:1,consts:[["passwordForm","ngForm"],[1,"main-content"],["id","sns-verify-user",1,"sns-verify-user"],[1,"verify-form",3,"submit"],["name","password","appearance","outline"],["name","password","type","password","ngModel","","matInput","","required","","placeholder","Password...","cdkFocusInitial","",3,"change"],["mat-raised-button",""]],template:function(e,s){if(e&1){let n=y();r(0,"div",1)(1,"div",2)(2,"form",3,0),l("submit",function(){return c(n),u(s.onSubmit())}),r(4,"h3"),a(5,"Confirm User"),i(),r(6,"mat-form-field",4)(7,"mat-label"),a(8,"Password"),i(),r(9,"input",5),l("change",function(){return c(n),u(s.unsetError())}),i(),v(10,G,2,0,"mat-hint"),i(),r(11,"button",6),a(12,"Submit"),i()()()()}e&2&&(f(10),w(s.incorrectPassword()?10:-1))},dependencies:[N,U,F,x,E,I,T,P,q,O,D,j,R,Q,C,V,B],styles:[".sns-verify-user[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.verify-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;min-width:10rem;max-width:30rem;width:100%;margin:auto;margin-top:3rem;padding:2rem;background-color:var(--sns-post-bg-color);border:1px solid rgb(200,200,200);border-radius:3px;color:var(--sns-text-color)}"]})}}return o})();export{ce as SnsVerifyUserComponent};
