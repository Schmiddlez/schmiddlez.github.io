import{a as y}from"./chunk-RQELFUR7.js";import"./chunk-LUY36RVE.js";import{a as b}from"./chunk-MOY26VGU.js";import"./chunk-AJP6ELTP.js";import"./chunk-6WBH7IPC.js";import"./chunk-C5RMYWSX.js";import"./chunk-P4ZELJWN.js";import{b as P}from"./chunk-CG5ODPV4.js";import"./chunk-OQ23N4OO.js";import"./chunk-MB2EZ7OD.js";import{Db as C,Eb as v,Ib as p,Ob as x,Tb as d,Ub as a,Vb as l,Xb as g,Zb as S,_b as s,cb as r,db as _,fa as m,ma as h,na as u,pb as w,wb as c}from"./chunk-UUT3EF6T.js";var D=()=>[import("./chunk-BGRH6GDJ.js").then(t=>t.SnsPostComponent),import("./chunk-FKPFKIYZ.js").then(t=>t.SnsPostCommentsComponent)];function M(t,f){if(t&1){let e=g();d(0,"sns-post",1),S("onComment",function(i){h(e);let o=s(2);return u(o.onComment(i))}),a(),l(1,"sns-post-comments",2)}if(t&2){let e=s(2);p("post",e.post)("user",e.me()),r(),p("comments",e.comments)("user",e.me())}}function O(t,f){if(t&1&&c(0,M,2,4),t&2){let e=s();x(e.post?0:-1)}}function T(t,f){t&1&&l(0,"div",3)(1,"div",4)}var R=(()=>{class t{constructor(e){this.route=e,this.userService=m(b),this.postService=m(y),this.comments=[],this.subs=[],this.me=this.userService.me$}ngOnInit(){let e=this.route.params.subscribe(n=>{let i=n.id;this.postService.getById$(i).subscribe(o=>{this.post=o}),this.postService.getComments$(i).subscribe(o=>{this.comments=o})});this.subs.push(e)}ngOnDestroy(){for(let e of this.subs)e.unsubscribe()}onComment(e){this.comments=[e,...this.comments]}appendComments(e,n){let i=[...e];for(let o of n)e.findIndex(V=>V.id==o.id)<0&&i.push(o);return i}static{this.\u0275fac=function(n){return new(n||t)(_(P))}}static{this.\u0275cmp=w({type:t,selectors:[["sns-view-post"]],decls:5,vars:1,consts:[["id","sns-view-post"],[1,"main-content",3,"onComment","post","user"],[1,"side-content",3,"comments","user"],[1,"main-content"],[1,"side-content"]],template:function(n,i){n&1&&(d(0,"div",0),c(1,O,1,1)(2,T,2,0),C(3,1,D,null,2),a()),n&2&&(r(3),v(i.post!=null))},styles:["#sns-view-post[_ngcontent-%COMP%]{position:relative;display:flex;flex-flow:row nowrap;justify-content:center;width:100%}.page-placeholder[_ngcontent-%COMP%]{flex:1;min-width:30rem;width:100vw;max-width:65rem}@media (max-width:1080px){sns-post[_ngcontent-%COMP%]{min-width:10rem;padding-right:1rem}.side-content[_ngcontent-%COMP%]{margin:auto;width:calc(100vw - (var(--nav-width) + 2rem))!important;max-width:unset!important;border-top:3px solid rgba(255,255,255,.5)}#sns-view-post[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.page-placeholder[_ngcontent-%COMP%]{flex:1;min-width:30rem;width:100vw;max-width:45rem}}"]})}}return t})();export{R as SnsViewPostComponent};
