import{a as qe}from"./chunk-WFUXBJ4N.js";import{a as W,b as j,c as We,d as xe}from"./chunk-Z62OXJQC.js";import{a as de,b as he,c as ge,d as ye,e as ze}from"./chunk-2XN2X2Z5.js";import{a as Ke}from"./chunk-E6B6ALXG.js";import{b as F}from"./chunk-4F4MFI3X.js";import{a as _e,b as Re,c as ue}from"./chunk-BJXZ7Y2Y.js";import{a as je}from"./chunk-CGQI2L42.js";import{D as G,b as re,d as b,f as q,g as oe,i as N,k as v,m as ne,n as Ce,o as Ve,p as Be,s as ae,t as se,u as le,v as J,w as X}from"./chunk-XT72EIBI.js";import{a as be}from"./chunk-7E7XWTTT.js";import{a as He}from"./chunk-6R3WEB4Y.js";import{a as Ue}from"./chunk-SVYMGW6U.js";import{a as U}from"./chunk-EJWSQFFV.js";import{a as $e}from"./chunk-JLWIDV3F.js";import{b as A,c as ve,e as M,f as k,k as H}from"./chunk-E7SDSQEU.js";import"./chunk-KE4LITEF.js";import"./chunk-44VI7T2K.js";import"./chunk-76PGFOOU.js";import{$a as pe,$b as C,Bb as L,G as Te,Gc as P,Hc as B,Jb as I,Jc as te,Kb as D,Kc as ie,Lb as Ie,Rb as K,Sb as Y,Tb as De,Vb as S,Wb as E,Xb as m,Yb as o,Zb as n,_b as c,ac as _,bb as Q,bc as V,ca as Oe,db as s,dc as ee,fc as x,gc as Ae,ha as h,hc as u,ma as T,mb as g,na as O,o as Me,u as Fe,ub as y,uc as Ne,vc as ke,wc as a,xc as f,ya as Le,yc as Ge}from"./chunk-W56RDURX.js";var ht=()=>[ne,J,X,re,Ce,le,q,oe,se,ae,k],Ye=()=>["/loa-assistant/home"],gt=(t,d)=>d.id;function vt(t,d){if(t&1&&(o(0,"option",22),a(1),n()),t&2){let e=d.$implicit;m("value",e.name),s(),f(e.name)}}function bt(t,d){if(t&1){let e=ee();o(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h5",7),a(6,"Add Character"),n(),o(7,"div",8),c(8,"img",9),n(),c(9,"button",10),n()(),o(10,"div",11)(11,"div",8)(12,"form",12),x("submit",function(){T(e);let r=u();return O(r.submit())}),o(13,"div",13)(14,"div",14),c(15,"input",15),o(16,"label",16),a(17,"Name"),n()(),o(18,"div",17),c(19,"input",18),o(20,"label",19),a(21,"Item Level"),n()()(),o(22,"div",20)(23,"select",21),S(24,vt,2,2,"option",22,gt),n(),o(26,"label",23),a(27,"Class"),n()(),o(28,"div",24),c(29,"input",25),o(30,"label",26),a(31,"Player"),n()(),o(32,"div",27)(33,"button",28),x("click",function(){T(e);let r=u();return O(r.reset())}),a(34,"Reset"),n(),o(35,"button",29),a(36,"Add Character"),n()()()()(),o(37,"div",30)(38,"button",31),a(39,"Cancel"),n()()()()()}if(t&2){let e=u();s(8),m("title",e.character().loaClass.name)("src",e.getLoaClassImage(e.character().loaClass),pe),s(),m("routerLink",P(6,Ye)),s(3),m("formGroup",e.characterForm),s(12),E(e.loaClasses()),s(11),m("disabled",e.characterForm.invalid),s(3),m("routerLink",P(7,Ye))}}var Je=(()=>{class t{constructor(e,i,r){this.toastService=e,this.route=i,this.router=r,this.playerService=h(F),this.characterService=h(W),this.subs=[],this.getLoaClassImage=ue,this.characterForm=new N({name:new v("",[b.required,b.pattern("[a-zA-Z]*")]),itemlevel:new v("",[b.required,b.min(0),b.max(_e)]),loaClass:new v("",[b.required]),player:new v("",b.required)}),this.playerChanges=qe(this.playerService.me$),this.player=this.playerService.me$,this.character=Le(structuredClone(Re)),this.loaClasses=this.characterService.loaClasses$}ngOnInit(){var e=this.playerChanges.subscribe(r=>{r&&(this.character().player=r,this.characterForm.controls.player.setValue(r.name))}),i=this.characterService.characterChanges$.subscribe(r=>{r.change=="add"&&r.character.name==this.character.name&&(this.character.set(r.character),this.router.navigate([`/loa-assistant/characters/${r.character.id}`]))});this.subs.push(e,i)}ngOnDestroy(){for(let e of this.subs)e.unsubscribe()}cancel(){this.router.navigate(["."],{relativeTo:this.route.parent})}submit(){let e=this.character();e.name=this.characterForm.controls.name.value,e.itemlevel=this.characterForm.controls.itemlevel.value;var i=this.loaClasses().find(r=>r.name==this.characterForm.controls.loaClass.value);i?e.loaClass=i:this.toastService.show({header:"Character Creation Error",body:"Invalid Character Class",type:"warning",source_feature:"loa-assistant"}),this.character.set(e),console.log(this.character()),this.characterService.addCharacter(e)}reset(){let e=structuredClone(Re),i=this.player();i&&(e.player=i),this.character.set(e),this.characterForm.controls.name.reset(),this.characterForm.controls.itemlevel.reset(),this.characterForm.controls.loaClass.reset(),this.characterForm.controls.player.reset(i?.name)}static{this.\u0275fac=function(i){return new(i||t)(g(U),g(A),g(M))}}static{this.\u0275cmp=y({type:t,selectors:[["character-add"]],hostBindings:function(i,r){i&1&&x("keydown.escape",function(){return r.cancel()},Q)},decls:6,vars:1,consts:[[1,"_color-discord-content-text"],[1,"modal-backdrop"],[1,"modal","loa-character-add",2,"display","block"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable","mw-75","_minw-25r","mx-auto"],[1,"modal-content","border","_minh-75"],[1,"modal-header","flex-column","gap-2"],[1,"d-flex","align-items-center","w-100","px-3"],[1,"modal-title","flex-grow-1"],[1,"flex-grow-1"],[1,"img-fluid","_class-image",3,"title","src"],["type","button","data-bs-backdrop","static","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"routerLink"],[1,"modal-body","d-flex"],[1,"d-flex","h-100","flex-column","gap-3",3,"submit","formGroup"],[1,"d-flex","gap-2"],[1,"form-floating","flex-grow-1"],["type","text","id","cName","formControlName","name","placeholder","Name",1,"form-control"],["for","cName"],[1,"form-floating","flex-shrink-0","w-10r"],["type","number","id","cLevel","formControlName","itemlevel","placeholder","Item Level",1,"form-control"],["for","cLevel"],[1,"form-floating","flex-shrink-0"],["formControlName","loaClass","id","cClass",1,"form-select"],[3,"value"],["for","cClass"],[1,"form-floating"],["type","text","readonly","","id","cPlayer","formControlName","player","placeholder","Player",1,"form-control-plaintext"],["for","cPlayer"],[1,"d-flex","flex-grow-1","align-items-end","justify-content-center","gap-2"],["type","button",1,"btn","btn-warning","flex-grow-1","mw-15r",3,"click"],["type","submit",1,"btn","btn-success","flex-grow-1","mw-15r",3,"disabled"],[1,"modal-footer","justify-content-end"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"routerLink"]],template:function(i,r){i&1&&(o(0,"div",0),a(1,"Loa Character Add / Edit"),n(),c(2,"div",1),L(3,bt,40,8),I(4,3,ht)),i&2&&(s(4),D(r.character))},dependencies:[G],styles:[".loa-character-add[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{color:var(--discord-menu-text)}._class-image[_ngcontent-%COMP%]{line-height:0;max-height:3rem;opacity:.5}"]})}}return t})();var Ct=()=>[ne,J,X,re,Ce,le,q,oe,se,ae,k,import("./chunk-73UHLZ4D.js").then(t=>t.CharacterRaidsEditComponent),import("./chunk-GFOKU6QF.js").then(t=>t.CharacterRepeatsEditComponent)],Xe=()=>["/loa-assistant/home"],_t=(t,d)=>d.id;function xt(t,d){if(t&1&&(o(0,"option",28),a(1),n()),t&2){let e=d.$implicit;m("value",e.name),s(),f(e.name)}}function yt(t,d){if(t&1){let e=ee();o(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h5",7),a(6),n(),o(7,"div",8),c(8,"img",9),n(),c(9,"button",10),n(),o(10,"ul",11)(11,"li",12)(12,"span",13),a(13,"Info"),n()(),o(14,"li",12)(15,"span",14),a(16,"Raids"),n()(),o(17,"li",12)(18,"span",15),a(19,"Repeats"),n()()()(),o(20,"div",16)(21,"div",17)(22,"form",18),x("submit",function(){T(e);let r=u();return O(r.submit(r.characterForm))}),o(23,"div",19)(24,"div",20),c(25,"input",21),o(26,"label",22),a(27,"Name"),n()(),o(28,"div",23),c(29,"input",24),o(30,"label",25),a(31,"Item Level"),n()()(),o(32,"div",26)(33,"select",27),S(34,xt,2,2,"option",28,_t),n(),o(36,"label",29),a(37,"Class"),n()(),o(38,"div",30),c(39,"input",31),o(40,"label",32),a(41,"Player"),n()(),o(42,"div",33)(43,"button",34),x("click",function(){T(e);let r=u();return O(r.reset(r.characterForm))}),a(44,"Reset"),n(),o(45,"button",35),a(46,"Save Changes"),n()()()(),o(47,"div",36),c(48,"character-raids-edit",37),n(),o(49,"div",38),c(50,"character-repeats-edit",37),n()(),o(51,"div",39)(52,"button",40),x("click",function(){T(e);let r=u();return O(r.characterDelete())}),a(53,"Delete"),n(),o(54,"button",41),a(55,"Cancel"),n()()()()()}if(t&2){let e=u();s(6),f(e.character.name),s(2),m("title",e.character.loaClass.name)("src",e.getLoaClassImage(e.character.loaClass),pe),s(),m("routerLink",P(9,Xe)),s(13),m("formGroup",e.characterForm),s(12),E(e.loaClasses()),s(11),m("disabled",e.characterForm.invalid),s(3),m("character",e.character),s(2),m("character",e.character),s(4),m("routerLink",P(10,Xe))}}var Ze=(()=>{class t{constructor(e,i,r){this.route=e,this.router=i,this.toastService=r,this.playerService=h(F),this.characterService=h(W),this.raidService=h(j),this.subs=[],this.getLoaClassImage=ue,this.characterForm=new N({name:new v("",[b.required,b.pattern("[a-zA-Z]*")]),itemlevel:new v("",[b.required,b.min(0),b.max(_e)]),loaClass:new v("",[b.required]),player:new v("",b.required)}),this.loaClasses=this.characterService.loaClasses$}ngOnInit(){let e=this.route.snapshot.params.id;this.characterService.getById(e).subscribe({next:i=>this.characterFound(i),error:i=>this.characterNotFound(i)})}ngOnDestroy(){for(let e of this.subs)e.unsubscribe()}cancel(){this.router.navigate(["."],{relativeTo:this.route.parent})}characterFound(e){console.log(e),this.character=e;for(let[i,r]of Object.entries(this.characterForm.controls))switch(i){case"name":r.setValue(this.character.name);break;case"itemlevel":r.setValue(this.character.itemlevel);break;case"loaClass":break;case"player":r.setValue(this.character.player.name);break}this.characterForm.controls.loaClass.setValue(this.character.loaClass.name)}characterNotFound(e){console.log(e),this.toastService.show({header:"Character",body:`Character with id:${this.route.snapshot.params.id} not found`,type:"danger",source_feature:"loa-assistant"}),this.router.navigate(["."],{relativeTo:this.route.parent})}submit(e){e===this.characterForm&&this.characterEdit()}reset(e){e===this.characterForm&&this.characterReset()}characterEdit(){for(let[i,r]of Object.entries(this.characterForm.controls))switch(i){case"name":this.character.name=r.value;break;case"itemlevel":this.character.itemlevel=r.value;break;case"loaClass":var e=this.loaClasses().find(l=>l.name===r.value);e&&(this.character.loaClass=e);break;case"player":break}this.characterService.editCharacter(this.character)}characterReset(){for(let[e,i]of Object.entries(this.characterForm.controls))switch(e){case"name":i.reset(this.character.name);break;case"itemlevel":i.reset(this.character.itemlevel);break;case"loaClass":i.reset(this.character.loaClass.name);break;case"player":i.reset(this.character.player.name);break}}characterDelete(){confirm(`Are you sure wish to delete this character: '${this.character.name}' ?`)&&(this.characterService.deleteCharacter(this.character),this.router.navigate(["."],{relativeTo:this.route.parent}))}static{this.\u0275fac=function(i){return new(i||t)(g(A),g(M),g(U))}}static{this.\u0275cmp=y({type:t,selectors:[["loa-character-edit"]],hostBindings:function(i,r){i&1&&x("keydown.escape",function(){return r.cancel()},Q)},decls:6,vars:1,consts:[[1,"_color-discord-content-text"],[1,"modal-backdrop"],[1,"modal","loa-character-edit",2,"display","block"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable","mw-75","_minw-25r","mx-auto"],[1,"modal-content","border","_minh-75"],[1,"modal-header","flex-column","gap-2"],[1,"d-flex","align-items-center","w-100","px-3"],[1,"modal-title","flex-grow-1"],[1,"flex-grow-1"],[1,"img-fluid","_class-image",3,"title","src"],["type","button","data-bs-backdrop","static","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"routerLink"],["role","tablist",1,"nav","nav-tabs","w-100","flex-nowrap","px-3"],["role","presentation",1,"nav-item"],["id","chrInfoTab","data-bs-toggle","tab","data-bs-target","#chrInfo","role","tab","aria-controls","chrInfo","aria-selected","false",1,"nav-link"],["id","chrRaidsTab","data-bs-toggle","tab","data-bs-target","#chrRaids","role","tab","aria-controls","chrRaids","aria-selected","true",1,"nav-link","active"],["id","chrRepeatsTab","data-bs-toggle","tab","data-bs-target","#chrRepeats","role","tab","aria-controls","chrRepeats","aria-selected","false",1,"nav-link"],[1,"modal-body","d-flex","tab-content"],["id","chrInfo","role","tabpanel","aria-labelledby","chrInfoTab",1,"tab-pane","fade","flex-grow-1"],[1,"d-flex","h-100","flex-column","gap-3",3,"submit","formGroup"],[1,"d-flex","gap-2"],[1,"form-floating","flex-grow-1"],["type","text","id","cName","formControlName","name","placeholder","Name",1,"form-control"],["for","cName"],[1,"form-floating","flex-shrink-0","w-10r"],["type","number","id","cLevel","formControlName","itemlevel","placeholder","Item Level",1,"form-control"],["for","cLevel"],[1,"form-floating","flex-shrink-0"],["formControlName","loaClass","id","cClass",1,"form-select"],[3,"value"],["for","cClass"],[1,"form-floating"],["type","text","readonly","","id","cPlayer","formControlName","player","placeholder","Player",1,"form-control-plaintext"],["for","cPlayer"],[1,"d-flex","flex-grow-1","align-items-end","justify-content-center","gap-2"],["type","button",1,"btn","btn-warning","flex-grow-1","mw-15r",3,"click"],["type","submit",1,"btn","btn-success","flex-grow-1","mw-15r",3,"disabled"],["id","chrRaids","role","tabpanel","aria-labelledby","chrRaidsTab",1,"tab-pane","fade","flex-grow-1","show","active"],[3,"character"],["id","chrRepeats","role","tabpanel","aria-labelledby","chrRepeatsTab",1,"tab-pane","fade","flex-grow-1"],[1,"modal-footer","justify-content-between"],["type","button",1,"btn","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"routerLink"]],template:function(i,r){i&1&&(o(0,"div",0),a(1,"Loa Character Add / Edit"),n(),c(2,"div",1),L(3,yt,56,11),I(4,3,Ct)),i&2&&(s(4),D(r.character))},dependencies:[G,H],styles:[".loa-character-edit[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{border-color:var(--discord-menu-text)}.loa-character-edit[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:var(--discord-content-text)}.loa-character-edit[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{cursor:pointer;border-color:var(--discord-menu-text)}.loa-character-edit[_ngcontent-%COMP%] > .modal-dialog[_ngcontent-%COMP%] > .modal-content[_ngcontent-%COMP%] > .modal-header[_ngcontent-%COMP%]{padding:1rem 0rem 0rem}.loa-character-edit[_ngcontent-%COMP%] > .modal-dialog[_ngcontent-%COMP%] > .modal-content[_ngcontent-%COMP%] > .modal-header[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{border-color:var(--discord-menu-text);border-bottom-color:transparent;background-color:var(--discord-menu)}.loa-character-edit[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{color:var(--discord-menu-text)}._class-image[_ngcontent-%COMP%]{line-height:0;max-height:3rem;opacity:.5}"]})}}return t})();var St=()=>[k],Et=()=>[import("./chunk-WOGFARCK.js").then(t=>t.GroupEditComponent),import("./chunk-IH4HNLHC.js").then(t=>t.LoaCharacterComponent),J,X,le,q,Be,k,import("./chunk-EWPC6V2M.js").then(t=>t.NonMutatingOrderByPipe)],wt=()=>[J,X,import("./chunk-Z4PQT3TD.js").then(t=>t.OrderByPipe)],kt=()=>["/loa-assistant"],Qe=t=>["/loa-assistant/home/raids",t],Pe=(t,d)=>d.id;function Rt(t,d){if(t&1&&(o(0,"li",4)(1,"a",5),a(2,"Raids"),n()(),o(3,"li",6),a(4,"Groups"),n()),t&2){let e=u();s(),m("routerLink",B(1,Qe,e.raidpost.id))}}function Pt(t,d){if(t&1&&(o(0,"option",38),a(1),n()),t&2){let e=d.$implicit;m("value",e.name),s(),f(e.loaClass.name+" | "+e.itemlevel+" - "+e.player.name)}}function Mt(t,d){if(t&1&&(o(0,"datalist",37),S(1,Pt,2,2,"option",38,Pe),te(3,"orderBy"),n()),t&2){let e=u(2);s(),E(ie(3,0,e.available,e.sortSignups))}}function Ft(t,d){if(t&1&&c(0,"loa-character",24),t&2){let e=d.$implicit;m("character",e)("showPlayer",!0)}}function Tt(t,d){if(t&1&&c(0,"group-edit",29),t&2){let e=d.$implicit,i=u(2);m("groupsFormArray",i.groupsFormArray)("raidpost",i.raidpost)("group",e)("available",i.available)}}function Ot(t,d){t&1&&(o(0,"div",30)(1,"h5"),a(2,"Raidpost currently has no groups"),n()())}function Lt(t,d){if(t&1){let e=ee();L(0,Mt,4,3),I(1,0,wt),Ie(),o(3,"div",7)(4,"section",8)(5,"div",9)(6,"h5"),a(7),n(),o(8,"h5"),a(9),n(),o(10,"h5"),a(11),n()(),o(12,"div",10)(13,"select",11)(14,"option",12),a(15,"Full Auto"),n(),o(16,"option",13),a(17,"Semi Auto"),n(),o(18,"option",14),a(19,"Full Manual"),n()(),o(20,"label",15),a(21,"Mode"),n()()(),o(22,"section",16)(23,"div",17)(24,"div",18)(25,"div",19)(26,"h5",20)(27,"button",21),a(28,"Sign-ups"),n()(),o(29,"div",22)(30,"div",23),S(31,Ft,1,2,"loa-character",24,Pe),te(33,"nonMutatingOrderBy"),n()()()(),o(34,"div",25)(35,"div",26)(36,"div",27)(37,"h3"),a(38,"Post mode must be set to 'Manual' to save changes"),n()()(),o(39,"div",28),S(40,Tt,1,4,"group-edit",29,Pe,!1,Ot,3,0,"div",30),n()()(),o(43,"div")(44,"div",31)(45,"div",32)(46,"button",33),x("click",function(){T(e);let r=u();return O(r.addGroup())}),a(47,"Add Group"),n(),o(48,"button",34),x("click",function(){T(e);let r=u();return O(r.reset())}),a(49,"Reset"),n()(),o(50,"div",32)(51,"button",35),x("click",function(){T(e);let r=u();return O(r.submit())}),a(52,"Save Changes"),n(),o(53,"button",36),a(54,"Cancel"),n()()()()()()}if(t&2){let e=u();s(7),f(e.raidpost.name),s(2),f(e.raidpost.properties.loaRaid.name),s(2),f(e.raidTime(e.raidpost.properties.startTime)),s(2),m("formControl",e.raidMode),s(18),E(ie(33,8,e.raidpost.signups,e.sortSignups)),s(4),m("hidden",e.validMode),s(5),E(e.raidpost.groups),s(11),m("disabled",!e.validMode),s(2),m("routerLink",B(11,Qe,e.raidpost.id))}}var et=(()=>{class t{constructor(e,i,r,l){this.route=e,this.router=i,this.toastService=r,this.idGen=l,this.playerService=h(F),this.groupEditService=h(Ke),this.loaRaidService=h(j),this.available=[],this.raidTime=de,this.subs=[],this.groupsFormArray=new Ve([]),this.raidForm=new N({groups:this.groupsFormArray}),this.raidMode=new v("FULL_AUTO")}ngOnInit(){let e=this.route.snapshot.params.id;var i=this.loaRaidService.getById(e).subscribe({next:l=>{this.raidpost=l,this.raidMode.reset(l.properties.mode),this.groupsBackup=[...this.raidpost.groups],this.available=[...this.raidpost.signups]},error:l=>{this.router.navigate(["loa-assistant"]),console.log(l)}}),r=this.loaRaidService.raidChanges$.subscribe(l=>{l.change=="groups"?(console.log(l.raidpost),this.groupsBackup=l.raidpost.groups,this.groupEditService.save()):l.change=="edit"&&(this.raidpost=l.raidpost,this.groupsBackup=l.raidpost.groups,this.raidMode.reset(this.raidpost.properties.mode))});this.subs.push(i,r)}ngOnDestroy(){for(let e of this.subs)e.unsubscribe();this.toastService.clear()}get validMode(){return this.raidMode.value.toLowerCase().includes("manual")}addGroup(){this.raidpost.groups.push({id:this.idGen.nextGroupId,name:`Group ${this.raidpost.groups.length+1}`,parties:[],raid:this.raidpost}),console.log(this.raidpost.groups)}submit(){if(!this.validMode){this.raidpost.properties.mode=this.raidMode.value,this.toastService.show({header:"Raid Mode",body:"Mode for post must be set to MANUAL to edit groups",type:"warning",source_feature:"loa-assistant",delay:5e3});return}let e=this.parseGroupInput(this.groupsFormArray.value);this.raidpost.groups=e,this.loaRaidService.groups(this.raidpost)}reset(){this.raidpost.groups=[...this.groupsBackup],Object.assign(this.available,this.raidpost.signups),this.groupsFormArray.clear(),this.groupEditService.reset()}sortC(e,i){return e.name.localeCompare(i.name,void 0,{sensitivity:"base"})}sortSignups(e,i){let r=e.player.name.localeCompare(i.player.name,void 0,{sensitivity:"base"});return r!=0?r:e.name.localeCompare(i.name,void 0,{sensitivity:"base"})}notAssigned(e){for(let i of this.groupsFormArray.controls)for(let r of i.get("partys").controls)for(let l of r.controls)if(l.value==e.id)return!1;return!0}cloneRaidpost(e){let i=structuredClone(e);return delete i.groups,i}parseGroupInput(e){var i=[];let r=this.cloneRaidpost(this.raidpost);for(let l of e){let p={id:l.groupId,name:`Group ${i.length+1}`,raid:r},R=this.parsePartyInput(l.partys);for(let w of R)w.group=structuredClone(p);p.parties=R,i.push(p)}return i}parsePartyInput(e){let i=[];if(e.length==0)return i;for(let r of e){let l=this.parseMemberInput(r),p={id:0,name:`Party ${i.length+1}`,members:l};i.push(p)}return i}parseMemberInput(e){let i=[];console.log(e);for(let r of e){let l=this.raidpost.signups.find(p=>p.id==r);if(l){i.push(l);continue}l=this.raidpost.signups.find(p=>p.name.toLowerCase()==r.toLowerCase()),l&&i.push(l)}return i}static{this.\u0275fac=function(i){return new(i||t)(g(A),g(M),g(U),g(We))}}static{this.\u0275cmp=y({type:t,selectors:[["edit-raid-groups"]],inputs:{raidpost:"raidpost"},decls:13,vars:4,consts:[[1,"container-xxl","d-flex","flex-column","raid-group-edit"],[1,"d-flex","w-100","pt-2","border-secondary","border-bottom"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],[1,"raid-group-edit","d-flex","flex-column","gap-3","_color-discord-menu-text"],[1,"d-flex","flex-column","gap-2","pt-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"form-floating"],["id","raidMode",1,"form-select","form-select-lg",3,"formControl"],["value","FULL_AUTO"],["value","SEMI_AUTO"],["value","FULL_MANUAL"],["for","raidMode"],[1,"vh-100","edit-section"],[1,"group-edit-section","flex-grow-1","overflow-hidden"],["id","signupsSection",1,"signups-section","accordion","overflow-y-auto"],[1,"accordion-item"],["id","signupListHeader",1,"accordion-header"],["data-bs-toggle","collapse","href","#signupList","role","button","aria-expanded","true","aria-controls","signupList",1,"accordion-button"],["id","signupList","aria-labelledby","signupListHeader","data-bs-parent","signupsSection",1,"accordion-collapse","collapse","collapse","show"],[1,"signups-list"],[1,"",3,"character","showPlayer"],[1,"groups","overflow-y-scroll"],[1,"position-sticky","sticky-top",3,"hidden"],[1,"text-center","bg-warning","text-black","p-2"],[1,"d-flex","flex-column","gap-3","px-2"],[1,"w-100",3,"groupsFormArray","raidpost","group","available"],[1,"text-center"],[1,"row","g-3"],[1,"col-6","d-flex","gap-2"],[1,"btn","btn-primary","flex-grow-1",3,"click"],[1,"btn","btn-warning","flex-grow-1",3,"click"],[1,"btn","btn-success","flex-grow-1",3,"click","disabled"],[1,"btn","btn-secondary","flex-grow-1",3,"routerLink"],["id","raidSignups"],[3,"value"]],template:function(i,r){i&1&&(o(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),a(6,"Home"),n()(),L(7,Rt,5,3),I(8,7,St),n()()(),L(10,Lt,55,13),I(11,10,Et),n()),i&2&&(s(5),m("routerLink",P(3,kt)),s(3),D(r.raidpost),s(3),D(r.raidpost))},dependencies:[G,H,k],styles:[".edit-section[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr auto;gap:1rem}.group-edit-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:.5rem;padding-top:.5rem;padding-bottom:.5rem}.raid-group-edit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--discord-type)}.signups-section[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{border:none;box-shadow:none}.signups-section[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none}.signups-list[_ngcontent-%COMP%]{display:flex;max-width:28rem;flex-flow:row wrap;gap:.75rem;padding:.25rem;overflow-y:auto}.ttt[_ngcontent-%COMP%]{height:100%;position:relative}.groups[_ngcontent-%COMP%]::-webkit-scrollbar, .signups-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.groups[_ngcontent-%COMP%]::-webkit-scrollbar-track   .signups-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent;margin:0}.groups[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .signups-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;background:var(--discord-menu-text);border-radius:3px}.groups[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .signups-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}@media(max-width:1000px){.group-edit-section[_ngcontent-%COMP%]{grid-template-columns:14rem 1fr}}@media(max-width:780px){.group-edit-section[_ngcontent-%COMP%]{grid-template-columns:1fr}.signups-section[_ngcontent-%COMP%]{order:2;align-self:end}.signups-list[_ngcontent-%COMP%]{max-width:none;flex-flow:row nowrap}}"]})}}return t})();var tt=()=>["/loa-assistant/home"],it=(t,d)=>d.id;function It(t,d){t&1&&c(0,"i",7)}function Dt(t,d){if(t&1&&(o(0,"option",22),a(1),n()),t&2){let e=d.$implicit;m("value",e.name),s(),f(e.name)}}function At(t,d){if(t&1&&(o(0,"option",22),a(1),n()),t&2){let e=d.$implicit;m("value",e.name),s(),f(e.name)}}var rt=(()=>{class t{constructor(e,i,r){this.route=e,this.router=i,this.toastService=r,this.playerService=h(F),this.raidService=h(j),this.subs=[],this.raidForm=new N({}),this.raidForm.setControl("name",new v("",b.required)),this.raidForm.setControl("server",new v("",b.required)),this.raidForm.setControl("loaRaid",new v("",b.required)),this.raidForm.setControl("startTime",new v("",b.required)),this.raidForm.setControl("type",new v("",b.required)),this.loaRaids=this.raidService.loaRaids$,this.servers=this.playerService.myServers$}ngOnInit(){var e=this.raidService.raidChanges$.subscribe(i=>{i.change=="add"&&i.raidpost.name==this.raidpost?.name&&(this.raidpost=i.raidpost,this.router.navigate([`/loa-assistant/raids/${this.raidpost.id}`]))});this.subs.push(e)}ngOnDestroy(){for(let e of this.subs)e.unsubscribe()}cancel(){this.router.navigate(["."],{relativeTo:this.route.parent})}reset(){this.raidForm.reset(),this.raidpost=void 0}submit(){var e=this.raidForm.controls.name.value,i=this.servers().find(w=>w.name==this.raidForm.controls.server.value);i||this.toastService.show({header:"Raidpost Creation Error",body:"Invalid Server",type:"warning",source_feature:"loa-assistant"});var r=this.loaRaids().find(w=>w.name==this.raidForm.controls.loaRaid.value);r||this.toastService.show({header:"Raidpost Creation Error",body:"Invalid Raid",type:"warning",source_feature:"loa-assistant"});var l=this.raidForm.controls.startTime.value,p=this.raidForm.controls.type.value;if(!(!i||!r)){var R={type:p,id:"0",name:e,server:i,postProperties:{postTime:new Date,channelId:"",messageId:"",mentions:[]},properties:{startTime:ge(l),publishMessageId:"",remainderMessageId:"",loaRaid:r,playerCount:r.playerCount,mode:"FULL_AUTO"},signups:[],groups:[],remainders:[]};console.log(R),this.raidpost=R,this.raidService.addPost(this.raidpost)}}static{this.\u0275fac=function(i){return new(i||t)(g(A),g(M),g(U))}}static{this.\u0275cmp=y({type:t,selectors:[["raid-add"]],hostBindings:function(i,r){i&1&&x("keydown.escape",function(){return r.cancel()},Q)},decls:56,vars:7,consts:[[1,"modal-backdrop"],[1,"modal","raid-post-edit",2,"display","block"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable","mw-75","_minw-25r","mx-auto"],[1,"modal-content","border","_minh-75"],[1,"modal-header","flex-column","gap-2"],[1,"edit-modal-header-top","w-100","px-3"],[1,"my-auto","flex-grow-1"],[1,"bi-arrow-clockwise","repeat-symbol"],["type","button","data-bs-backdrop","static","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"routerLink"],[1,"modal-body","d-flex"],["id","raidEdit",1,"flex-grow-1"],[1,"h-100","d-flex","flex-column"],[1,"alert","alert-warning","d-flex","align-items-center","justify-content-center","p-0","text-center","border-2","border-warning"],[1,"bi-exclamation","float-start","fs-2"],[1,"bi-exclamation","float-end","fs-2"],[1,"d-flex","flex-grow-1","flex-column","gap-3",3,"submit","formGroup"],[1,"form-floating"],["type","text","id","rName","formControlName","name","placeholder","Name",1,"form-control"],["for","rName"],[1,"d-flex","gap-2"],[1,"form-floating","flex-grow-1"],["id","rServer","formControlName","server",1,"form-select"],[3,"value"],["for","rServer"],[1,"form-floating","flex-shrink-0","w-10r"],["id","rLoaRaid","formControlName","loaRaid",1,"form-select"],["for","rLoaRaid"],["type","datetime-local","id","rStartTime","formControlName","startTime","placeholder","Start Time",1,"form-control"],["for","rStartTime"],["id","rType","formControlName","type",1,"form-select"],["value","raidpost"],["value","repeatingpost"],["for","rType"],[1,"d-flex","flex-grow-1","align-items-end","justify-content-center","gap-2"],["type","button",1,"btn","btn-warning","flex-grow-1","mw-15r",3,"click"],["type","submit",1,"btn","btn-success","flex-grow-1","mw-15r",3,"disabled"],[1,"modal-footer","justify-content-end"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"routerLink"]],template:function(i,r){i&1&&(c(0,"div",0),o(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5",6),a(7,"Add Raidpost"),n(),K(8,It,1,0,"i",7),c(9,"button",8),n()(),o(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12),c(14,"i",13),o(15,"span"),a(16,"Note that you must have permissions to manage raids in this post's Discord server"),n(),c(17,"i",14),n(),o(18,"form",15),x("submit",function(){return r.submit()}),o(19,"div",16),c(20,"input",17),o(21,"label",18),a(22,"Name"),n()(),o(23,"div",19)(24,"div",20)(25,"select",21),S(26,Dt,2,2,"option",22,it),n(),o(28,"label",23),a(29,"Server"),n()(),o(30,"div",24)(31,"select",25),S(32,At,2,2,"option",22,it),n(),o(34,"label",26),a(35,"Raid"),n()()(),o(36,"div",16),c(37,"input",27),o(38,"label",28),a(39,"Start Time"),n()(),o(40,"div",16)(41,"select",29)(42,"option",30),a(43,"No"),n(),o(44,"option",31),a(45,"Yes"),n()(),o(46,"label",32),a(47,"Repeating Post?"),n()(),o(48,"div",33)(49,"button",34),x("click",function(){return r.reset()}),a(50,"Reset"),n(),o(51,"button",35),a(52,"Add Post"),n()()()()()(),o(53,"div",36)(54,"button",37),a(55,"Cancel"),n()()()()()),i&2&&(s(8),Y((r.raidpost==null?null:r.raidpost.type)=="repeatingpost"?8:-1),s(),m("routerLink",P(5,tt)),s(9),m("formGroup",r.raidForm),s(8),E(r.servers()),s(6),E(r.loaRaids()),s(19),m("disabled",!r.raidForm.valid),s(3),m("routerLink",P(6,tt)))},dependencies:[G,ne,J,X,re,le,q,oe,se,ae,k],styles:[".edit-modal-header-top[_ngcontent-%COMP%]{position:relative;display:flex;flex-flow:row nowrap;align-items:center}.repeat-symbol[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);font-size:2rem;line-height:0;animation:_ngcontent-%COMP%_spin 4s linear infinite}.loaClassImage[_ngcontent-%COMP%]{height:1.5rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return t})();var Nt=()=>[k,ne,re,q,oe,se,ae,import("./chunk-JYNK2G5E.js").then(t=>t.RaidGroupComponent)],ot=()=>["/loa-assistant/home"],Gt=t=>[t],jt=(t,d)=>d.id;function $t(t,d){t&1&&c(0,"i",7)}function Vt(t,d){if(t&1&&(o(0,"div",19)(1,"span",18),a(2),n(),o(3,"span",18),a(4),n(),o(5,"span",18),a(6),n()()),t&2){let e=u(2);s(2),f("Me : "+e.counts.me.total),s(2),f("DPS : "+e.counts.me.dps),s(2),f("SUP : "+e.counts.me.sup)}}function Bt(t,d){if(t&1&&(o(0,"div")(1,"div"),c(2,"img",53),n(),o(3,"div",54),a(4),n(),o(5,"div"),a(6),n()()),t&2){let e=d.$implicit,i=u(2);s(2),m("title",e.loaClass.name)("alt",e.loaClass.name)("src",i.getLoaClassImage(e.loaClass),pe),s(),Ne(i.characterIsMine$(e)),m("title",e.name),s(),f(e.name),s(2),f(e.itemlevel)}}function Ht(t,d){t&1&&(o(0,"div")(1,"span"),a(2,"No Remainders"),n()())}function Ut(t,d){if(t&1&&c(0,"raid-group",24),t&2){let e=d.$implicit;m("group",e)}}function qt(t,d){t&1&&(o(0,"div")(1,"span"),a(2,"No Current Groups"),n()())}function Wt(t,d){if(t&1){let e=ee();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5",6),a(6),n(),K(7,$t,1,0,"i",7),c(8,"button",8),n(),o(9,"ul",9)(10,"li",10)(11,"span",11),a(12,"Info"),n()(),o(13,"li",10)(14,"span",12),a(15,"Groups"),n()(),o(16,"li",10)(17,"span",13),a(18,"Edit"),n()()()(),o(19,"div",14)(20,"div",15)(21,"div")(22,"h4"),a(23),n()(),o(24,"div")(25,"strong"),a(26),n()(),o(27,"div"),a(28),n(),o(29,"div",16)(30,"div",17)(31,"span",18),a(32),n(),o(33,"span",18),a(34),n(),o(35,"span",18),a(36),n()(),K(37,Vt,7,3,"div",19),n(),o(38,"div",20)(39,"h5"),a(40,"Remainders"),n(),o(41,"div",21),S(42,Bt,7,8,"div",null,jt,!1,Ht,3,0,"div"),n()()(),o(45,"div",22)(46,"div",23),S(47,Ut,1,1,"raid-group",24,De,!1,qt,3,0,"div"),n()(),o(50,"div",25)(51,"div",26)(52,"div",27),c(53,"i",28),o(54,"span"),a(55,"Note that you must have permissions to manage raids in this post's Discord server"),n(),c(56,"i",29),n(),o(57,"form",30),x("submit",function(){T(e);let r=u();return O(r.submit())}),o(58,"div",31),c(59,"input",32),o(60,"label",33),a(61,"Name"),n()(),o(62,"div",34)(63,"div",35),c(64,"input",36),o(65,"label",37),a(66,"Server"),n()(),o(67,"div",38),c(68,"input",39),o(69,"label",40),a(70,"Raid"),n()()(),o(71,"div",31),c(72,"input",41),o(73,"label",42),a(74,"Post Time"),n()(),o(75,"div",31),c(76,"input",43),o(77,"label",44),a(78,"Start Time"),n()(),o(79,"div",45)(80,"a",46),a(81,"Edit Groups"),n()(),o(82,"div",47)(83,"button",48),x("click",function(){T(e);let r=u();return O(r.reset())}),a(84,"Reset"),n(),o(85,"button",49),a(86,"Save Changes"),n()()()()()(),o(87,"div",50)(88,"button",51),x("click",function(){T(e);let r=u();return O(r.delete())}),a(89,"Delete"),n(),o(90,"button",52),a(91,"Cancel"),n()()()()()}if(t&2){let e=u();s(6),f(e.raidpost.properties.loaRaid.name),s(),Y(e.raidpost.type=="repeatingpost"?7:-1),s(),m("routerLink",P(16,ot)),s(15),f(e.raidpost.name),s(3),f(e.raidTime(e.raidpost.properties.startTime)),s(2),f(e.raidpost.server.name),s(4),f("All : "+e.counts.all.total),s(2),f("DPS : "+e.counts.all.dps),s(2),f("SUP : "+e.counts.all.sup),s(),Y(e.player()?37:-1),s(5),E(e.raidpost.remainders),s(5),E(e.groups),s(10),m("formGroup",e.raidForm),s(23),m("routerLink",B(17,Gt,e.editGroupsLink)),s(5),m("disabled",!e.raidForm.valid),s(5),m("routerLink",P(19,ot))}}var nt=(()=>{class t{constructor(e,i){this.route=e,this.router=i,this.playerService=h(F),this.characterService=h(W),this.raidService=h(j),this.subs=[],this.raidTime=de,this.getLoaClassImage=ue,this.raidForm=new N({}),this.player=this.playerService.me$}ngOnInit(){let e=this.route.snapshot.params.id;this.raidService.getById(e).subscribe({next:r=>this.raidpostFound(r),error:r=>this.raidpostNotFound(r)});var i=this.raidService.raidChanges$.subscribe(r=>{r.change=="edit"&&r.raidpost.id==this.raidpost?.id&&(this.backupPost=structuredClone(r.raidpost),this.raidpost=r.raidpost)});this.subs.push(i)}ngOnDestroy(){for(let e of this.subs)e.unsubscribe()}cancel(){this.router.navigate(["."],{relativeTo:this.route.parent})}raidpostFound(e){console.log(e),this.raidpost=e,this.backupPost=structuredClone(e),this.groups=e.groups,this.editGroupsLink=`/loa-assistant/raids/${this.raidpost.id}/edit/groups`,this.raidForm.setControl("name",new v(this.backupPost.name,b.required)),this.raidForm.setControl("server",new v(this.backupPost.server.name,b.required)),this.raidForm.setControl("loaRaid",new v(this.backupPost.properties.loaRaid.name,b.required)),this.raidForm.setControl("postTime",new v(he(this.backupPost.postProperties.postTime),b.required)),this.raidForm.setControl("startTime",new v(he(this.backupPost.properties.startTime),b.required))}raidpostNotFound(e){this.router.navigate(["."],{relativeTo:this.route.parent}),console.log(e)}get counts(){return ze(this.raidpost,this.player())}submit(){let e=this.raidpost;for(let[i,r]of Object.entries(this.raidForm.controls))switch(i){case"name":e.name=r.value;break;case"server":break;case"loaRaid":break;case"postTime":e.postProperties.postTime=ge(r.value);break;case"startTime":e.properties.startTime=ge(r.value);break}this.raidService.editPost(this.raidpost)}reset(){this.raidForm.controls.name.reset(this.backupPost.name),this.raidForm.controls.server.reset(this.backupPost.server.name),this.raidForm.controls.loaRaid.reset(this.backupPost.properties.loaRaid.name),this.raidForm.controls.postTime.reset(he(this.backupPost.postProperties.postTime)),this.raidForm.controls.startTime.reset(he(this.backupPost.properties.startTime))}delete(){confirm(`Are you sure wish to delete this raidpost: '${this.raidpost.name}' ?`)&&(this.raidService.deletePost(this.raidpost),this.router.navigate(["."],{relativeTo:this.route.parent}))}characterIsMine$(e){return e.player.id===this.player()?.id?{color:"lightskyblue"}:{}}static{this.\u0275fac=function(i){return new(i||t)(g(A),g(M))}}static{this.\u0275cmp=y({type:t,selectors:[["raid-edit"]],hostBindings:function(i,r){i&1&&x("keydown.escape",function(){return r.cancel()},Q)},decls:4,vars:1,consts:[[1,"modal-backdrop"],[1,"modal","raid-post-edit",2,"display","block"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable","mw-75","_minw-25r","mx-auto"],[1,"modal-content","border","_minh-75"],[1,"modal-header","flex-column","gap-2"],[1,"edit-modal-header-top","w-100","px-3"],[1,"my-auto","flex-grow-1"],[1,"bi-arrow-clockwise","repeat-symbol"],["type","button","data-bs-backdrop","static","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"routerLink"],["role","tablist",1,"nav","nav-tabs","w-100","flex-nowrap","px-3"],["role","presentation",1,"nav-item"],["id","raidInfoTab","data-bs-toggle","tab","data-bs-target","#raidInfo","role","tab","aria-controls","raidInfo","aria-selected","true",1,"nav-link","active"],["id","raidGroupsTab","data-bs-toggle","tab","data-bs-target","#raidGroups","role","tab","aria-controls","raidGroups","aria-selected","false",1,"nav-link"],["id","raidEditTab","data-bs-toggle","tab","data-bs-target","#raidEdit","role","tab","aria-controls","raidEdit","aria-selected","false",1,"nav-link"],[1,"modal-body","d-flex","tab-content"],["id","raidInfo","role","tabpanel","aria-labelledby","raidInfoTab",1,"tab-pane","fade","flex-grow-1","show","active"],[1,"border-top","border-secondary","pt-1","gap-1","my-2"],[1,"row"],[1,"col-4"],[1,"row","text-success"],[1,"text-center","pt-3"],[1,"d-flex","flex-wrap","gap-3","justify-content-center"],["id","raidGroups","role","tabpanel","aria-labelledby","raidGroupsTab",1,"tab-pane","fade","flex-grow-1"],[1,"d-flex","flex-wrap","gap-4","align-items-center","justify-content-center"],[3,"group"],["id","raidEdit","role","tabpanel","aria-labelledby","raidEditTab",1,"tab-pane","fade","flex-grow-1"],[1,"h-100","d-flex","flex-column"],[1,"alert","alert-warning","d-flex","align-items-center","justify-content-center","p-0","text-center","border-2","border-warning"],[1,"bi-exclamation","float-start","fs-2"],[1,"bi-exclamation","float-end","fs-2"],[1,"d-flex","flex-grow-1","flex-column","gap-3",3,"submit","formGroup"],[1,"form-floating"],["type","text","id","rName","formControlName","name","placeholder","Name",1,"form-control"],["for","rName"],[1,"d-flex","gap-2"],[1,"form-floating","flex-grow-1"],["type","text","readonly","","id","rServer","formControlName","server","placeholder","Server",1,"form-control-plaintext"],["for","rServer"],[1,"form-floating","flex-shrink-0","w-10r"],["type","text","readonly","","id","rLoaRaid","formControlName","loaRaid","placeholder","LoaRaid",1,"form-control-plaintext"],["for","rLoaRaid"],["type","datetime-local","id","rPostTime","formControlName","postTime","placeholder","Post Time",1,"form-control"],["for","rPostTime"],["type","datetime-local","id","rStartTime","formControlName","startTime","placeholder","Start Time",1,"form-control"],["for","rStartTime"],[1,"text-center"],[3,"routerLink"],[1,"d-flex","flex-grow-1","align-items-end","justify-content-center","gap-2"],["type","button",1,"btn","btn-warning","flex-grow-1","mw-15r",3,"click"],["type","submit",1,"btn","btn-success","flex-grow-1","mw-15r",3,"disabled"],[1,"modal-footer","justify-content-between"],["type","button",1,"btn","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"routerLink"],[1,"loaClassImage",3,"title","alt","src"],[1,"flex-grow-1","text-truncate",3,"title"]],template:function(i,r){i&1&&(c(0,"div",0),L(1,Wt,92,20),I(2,1,Nt)),i&2&&(s(2),D(r.raidpost))},dependencies:[H,G],styles:[".raid-post-edit[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{border-color:var(--discord-menu-text)}.raid-post-edit[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:var(--discord-content-text)}.raid-post-edit[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{cursor:pointer;border-color:var(--discord-menu-text)}.raid-post-edit[_ngcontent-%COMP%] > .modal-dialog[_ngcontent-%COMP%] > .modal-content[_ngcontent-%COMP%] > .modal-header[_ngcontent-%COMP%]{padding:1rem 0rem 0rem}.raid-post-edit[_ngcontent-%COMP%] > .modal-dialog[_ngcontent-%COMP%] > .modal-content[_ngcontent-%COMP%] > .modal-header[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{border-color:var(--discord-menu-text);border-bottom-color:transparent;background-color:var(--discord-menu)}.raid-post-edit[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{color:var(--discord-menu-text)}._class-image[_ngcontent-%COMP%]{line-height:0;max-height:3rem;opacity:.5}.filter-symbol[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);font-size:1.75rem;line-height:0}.edit-modal-header-top[_ngcontent-%COMP%]{position:relative;display:flex;flex-flow:row nowrap;align-items:center}.edit-modal-tablist[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;padding-left:1rem;padding-right:1rem;width:100%}.repeat-symbol[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);font-size:2rem;line-height:0;animation:_ngcontent-%COMP%_spin 4s linear infinite}.loaClassImage[_ngcontent-%COMP%]{height:1.5rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return t})();var we=(()=>{class t{static{this.LOA_TOKEN_COOKIE_NAME="loa-tokens"}}return t})();var z=class t extends je{static{this.url=`${$e.loa()}/oauth`}constructor(){super(`${t.url}/url`,`${t.url}/tokens`,`${t.url}/refresh`,`${t.url}/logout`,we.LOA_TOKEN_COOKIE_NAME)}isValid(){return this.http.get(`${t.url}/valid`)}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=Oe({token:t,factory:t.\u0275fac,providedIn:"root"})}};var st=(t,d)=>{let e=h(M),i=h(be),r=h(z),l=()=>(e.navigate(["/loa-assistant/login"]),d.url,Me);return i.check("loa-tokens")?r.isValid().pipe(Fe(p=>p||l()),Te((p,R)=>l())):l()};var zt=(t,d)=>d.id;function Kt(t,d){if(t&1&&(C(0,"div",3)(1,"h5",1),a(2),_(),C(3,"div",5)(4,"p"),a(5),_()()()),t&2){let e=d.$implicit;s(2),f(e.name),s(3),f(e.statement)}}function Yt(t,d){t&1&&(C(0,"div",4)(1,"h5"),a(2,"No Current Announcements"),_()())}var lt=(()=>{class t{constructor(){this.announcements=[]}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=y({type:t,selectors:[["announcements"]],inputs:{announcements:"announcements"},decls:7,vars:1,consts:[[1,"card","announcements"],[1,"card-header"],[1,"card-body","overflow-y-auto"],[1,"card","announcement"],[1,"text-center"],[1,"card-body"]],template:function(i,r){i&1&&(C(0,"div",0)(1,"h5",1),a(2,"Announcements"),_(),C(3,"div",2),S(4,Kt,6,2,"div",3,zt,!1,Yt,3,0,"div",4),_()()),i&2&&(s(4),E(r.announcements))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden}.announcements[_ngcontent-%COMP%]{flex:1;overflow:hidden}.announcements[_ngcontent-%COMP%] > .card-body[_ngcontent-%COMP%]{overflow-y:auto}.announcement[_ngcontent-%COMP%] > .card-body[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{white-space:pre-line}"]})}}return t})();var Jt=()=>[k,import("./chunk-Z4PQT3TD.js").then(t=>t.OrderByPipe)],Xt=t=>["raids",t],Zt=(t,d)=>d.id;function Qt(t,d){if(t&1&&c(0,"i"),t&2){let e=u().$implicit,i=u(2);ke("bi-arrow-clockwise repeat-symbol "+i.repeatColor(e))}}function ei(t,d){if(t&1&&(o(0,"div",10),c(1,"div"),o(2,"h5",12)(3,"span",13),a(4),n(),o(5,"span",14),a(6),n()(),o(7,"div",15)(8,"div",16),a(9),n(),K(10,Qt,1,2,"i",17),n()()),t&2){let e=d.$implicit,i=u(2);m("routerLink",B(9,Xt,e.id)),s(),ke("p-1 rounded "+i.raidColor(e)),s(2),m("title",e.name),s(),f(e.name),s(2),f(e.properties.loaRaid.name),s(2),m("title",i.raidTime(e.properties.startTime)),s(),f(i.raidTime(e.properties.startTime)),s(),Y(e.type=="repeatingpost"?10:-1)}}function ti(t,d){t&1&&(o(0,"div",11)(1,"h5"),a(2,"You have no available raids"),n()())}function ii(t,d){if(t&1&&(S(0,ei,11,11,"div",10,Zt,!1,ti,3,0,"div",11),te(3,"orderBy")),t&2){let e=u();E(ie(3,1,e.upcomingRaids,e.sort))}}var dt=(()=>{class t{constructor(e){this.playerService=e,this.raidposts=[],this.subs=[],this.raidTime=de,this.sort=ye,this.raidFilterForm=new N({raid:new v("Any"),server:new v("Any"),status:new v("Any")})}ngOnInit(){this.player||(this.player=this.playerService.me$())}ngOnDestroy(){for(let e of this.subs)e.unsubscribe()}get upcomingRaids(){let e=[...this.raidposts];for(let[i,r]of Object.entries(this.raidFilterForm.controls))if(r.value!="Any")switch(i){case"raid":e=e.filter(l=>l.properties.loaRaid.name==r.value||r.value==="");break;case"server":e=e.filter(l=>l.server.name==r.value||r.value==="");break;case"status":if(!this.player)break;r.value=="Not Signed Up"?e=e.filter(l=>!l.signups.find(p=>p.player.id==this.player?.id)):r.value=="Signed Up"&&(e=e.filter(l=>l.signups.find(p=>p.player.id==this.player?.id)));break}return e}inRaid(e){if(!this.player)return!1;for(let i of e.signups)if(i.player.id==this.player.id)return!0;return!1}inRepeat(e){if(!this.player)return!1;let i=e;for(let r of i?.repeatingSignups)if(r.player.id==this.player?.id)return!0;return!1}raidColor(e){if(this.player)return this.inRaid(e)?"bg-success":"bg-danger"}repeatColor(e){if(this.player)return this.inRepeat(e)?"text-success":"text-danger"}color(e){for(let i of e.signups)if(i.player.id===this.player?.id)return{"background-color":"yellowgreen"};return{"background-color":"lightcoral"}}static{this.\u0275fac=function(i){return new(i||t)(g(F))}}static{this.\u0275cmp=y({type:t,selectors:[["loa-upcoming-raids"]],inputs:{raidposts:"raidposts",player:"player"},decls:17,vars:2,consts:[[1,"card","loa-upcoming-raids"],[1,"card-header","d-flex"],[1,"m-0"],["id","upcomingRaidsFilter","title","Filter Upcoming Raids","data-bs-toggle","dropdown","data-bs-auto-close","outside","aria-expanded","false",1,"bi-filter","filter-symbol","_color-discord-menu-text"],[1,"dropdown","filter-dropdown"],["aria-labelledby","upcomingRaidsFilter",1,"dropdown-menu","w-20r","raid-filter"],[1,"dropdown-header"],[1,"raid-filter",3,"filterForm"],[1,"upcoming-raid-list","card-body","d-flex","flex-column","gap-2"],[1,"d-flex","gap-2"],[1,"card","loa-upcoming-raid",3,"routerLink"],[1,"text-center"],[1,"card-subtitle","d-flex","flex-nowrap","justify-content-between"],[1,"text-nowrap","text-truncate",3,"title"],[1,"fs-6","align-self-end","text-nowrap"],[1,"d-flex","flex-nowrap","justify-content-between"],[1,"fs-6","text-truncate",3,"title"],[3,"class"]],template:function(i,r){i&1&&(o(0,"div",0)(1,"div",1)(2,"h5",2),a(3,"Upcoming Raids"),n(),c(4,"i",3),o(5,"div",4)(6,"ul",5)(7,"li")(8,"h6",6),a(9,"Filter Raids"),n()(),o(10,"li"),c(11,"raid-filter",7),n()()()(),o(12,"div",8),L(13,ii,4,4),I(14,13,Jt),n(),c(16,"div",9),n()),i&2&&(s(11),m("filterForm",r.raidFilterForm),s(3),D(r.raidposts))},dependencies:[H,xe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden}.upcoming-raid-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.upcoming-raid-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent;margin:0}.upcoming-raid-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;background:var(--discord-menu-text);border-radius:3px}.upcoming-raid-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.loa-upcoming-raids[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden}.loa-upcoming-raids[_ngcontent-%COMP%] > .card-body[_ngcontent-%COMP%]{overflow-y:auto}.loa-upcoming-raid[_ngcontent-%COMP%]{position:relative;display:flex;flex-flow:column;gap:.5rem;padding:.5rem!important;color:var(--discord-content-text);border-radius:3px!important;background-color:var(--discord-content)}.loa-upcoming-raid[_ngcontent-%COMP%]:hover{cursor:pointer;scale:1.01;border:1px solid var(--discord-content-text);border-radius:3px}.filter-symbol[_ngcontent-%COMP%]{position:absolute;font-size:1.75rem;top:.45rem;right:.5rem;line-height:0}.filter-symbol[_ngcontent-%COMP%]:hover{cursor:pointer;scale:1.1}.repeat-symbol[_ngcontent-%COMP%]{font-size:1.5rem;align-self:center;line-height:0;animation:_ngcontent-%COMP%_spin 4s linear infinite}.raid-filter[_ngcontent-%COMP%]{background-color:var(--discord-menu)}.filter-dropdown[_ngcontent-%COMP%]{list-style-type:none!important}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return t})();var ri=()=>[k,import("./chunk-IH4HNLHC.js").then(t=>t.LoaCharacterComponent),import("./chunk-Z4PQT3TD.js").then(t=>t.OrderByPipe)],oi=()=>[k,import("./chunk-4MKCWRKG.js").then(t=>t.RaidPostComponent),import("./chunk-Z4PQT3TD.js").then(t=>t.OrderByPipe)],ni=()=>["characters/add"],ai=()=>["raids/add"],si=t=>["characters",t],li=t=>["raids",t],ct=(t,d)=>d.id;function di(t,d){if(t&1&&c(0,"loa-character",19),t&2){let e=d.$implicit;m("character",e)("routerLink",B(2,si,e.id))}}function ci(t,d){t&1&&(o(0,"div",20)(1,"h5"),a(2,"You have no characters"),n()())}function mi(t,d){if(t&1&&(o(0,"div",18),S(1,di,1,4,"loa-character",19,ct,!1,ci,3,0,"div",20),te(4,"orderBy"),n()),t&2){let e=u();s(),E(ie(4,1,e.characters(),e.sortC))}}function pi(t,d){if(t&1&&c(0,"raid-post",21),t&2){let e=d.$implicit,i=u(2);m("raidpost",e)("player",i.player())("routerLink",B(3,li,e.id))}}function ui(t,d){if(t&1&&(o(0,"div",20)(1,"h5"),a(2),n()()),t&2){let e=u(2);s(2),Ge("You have no available ",e.raids.length>0?"filtered":""," raids")}}function fi(t,d){if(t&1&&(o(0,"div",18),S(1,pi,1,5,"raid-post",21,ct,!1,ui,3,1,"div",20),te(4,"orderBy"),n()),t&2){let e=u();s(),E(ie(4,1,e.filteredRaids,e.sortRaids))}}var mt=(()=>{class t{sortC(e,i){return e.itemlevel-i.itemlevel}constructor(e,i){this.router=e,this.toastService=i,this.meService=h(F),this.characterService=h(W),this.raidService=h(j),this.loginService=h(z),this.cookieService=h(be),this.colors=He,this.testr=null,this.raidTime=de,this.sortRaids=ye,this.subs=[],this.player=this.meService.me$,this.characters=this.meService.myCharacters$,this.servers=this.meService.myServers$,this.raids=this.meService.myRaids$,this.repeats=this.meService.myRepeats$,this.raidFilterForm=new N({raid:new v("Any"),server:new v("Any"),status:new v("Any")})}ngOnInit(){var e=this.characterService.characterChanges$.subscribe(l=>{let p=l?.character,R=l?.change;if(p==null)return;let w=this.characters();switch(R){case"add":w.push(p);break;case"edit":let ce=w.find(me=>me.id==p.id);ce!=null&&Object.assign(ce,p);break;case"delete":let fe=w.findIndex(me=>me.id==p.id);fe>-1&&w.splice(fe,1);break;case"signup":console.log("Signup");break}}),i=this.characterService.signupChanges$.subscribe(l=>{l.forEach(p=>{var R=this.raids().find(w=>w.id==p.id);if(R!=null&&R!==p){if(R.type=="repeatingpost"){let w=R,ce=p;w.repeatingSignups.length=0,Object.assign(w.repeatingSignups,ce.repeatingSignups)}R.signups.length=0,Object.assign(R.signups,p.signups)}})}),r=this.raidService.raidChanges$.subscribe(l=>{let p=l?.raidpost,R=l?.change;if(p==null)return;let w=this.raids();switch(R){case"add":w.push(p);break;case"edit":let ce=w.find(me=>me.id==p.id);ce!=null&&Object.assign(ce,p);break;case"delete":let fe=w.findIndex(me=>me.id==p.id);fe>-1&&w.splice(fe,1);break;case"signup":console.log("Signup");break}});this.subs.push(e,i,r)}ngOnDestroy(){for(let e of this.subs)e.unsubscribe();clearTimeout(this.expirationTimeout)}get filteredRaids(){let e=[...this.raids()];for(let[i,r]of Object.entries(this.raidFilterForm.controls))if(r.value!="Any")switch(i){case"raid":e=e.filter(l=>l.properties.loaRaid.name==r.value||r.value==="");break;case"server":e=e.filter(l=>l.server.name==r.value||r.value==="");break;case"status":if(!this.player)break;r.value=="Not Signed Up"?e=e.filter(l=>!l.signups.find(p=>p.player.id==this.player()?.id)):r.value=="Signed Up"&&(e=e.filter(l=>l.signups.find(p=>p.player.id==this.player()?.id)));break}return e}logout(){this.player()&&this.loginService.logout$().subscribe({next:i=>{i?(this.cookieService.delete(we.LOA_TOKEN_COOKIE_NAME),this.router.navigate(["loa-assistant/login"])):this.toastService.show({header:"Error",body:"Failed to logout. Please try again.",type:"danger",source_feature:"loa-assistant",delay:7500})},error:i=>{console.log(i),this.toastService.show({header:"Error",body:"Failed to logout. Please try again.",type:"danger",source_feature:"loa-assistant",delay:7500})}})}static{this.\u0275fac=function(i){return new(i||t)(g(M),g(U))}}static{this.\u0275cmp=y({type:t,selectors:[["loa-home"]],decls:35,vars:13,consts:[[1,"d-flex","justify-content-between","_color-discord-menu-text"],[1,"logout-button",3,"click"],[1,"container-xxl","d-flex","flex-column","gap-5","pb-5","loa-home"],[1,"row","g-3r","g-2","_minh-20r"],[1,"col-12","col-lg-8","mh-25r","_minh-10r"],[1,"col-12","col-lg-4","mh-25r","_minh-10r",3,"raidposts","player"],[1,"d-flex","gap-3"],["text","Characters","type","h4",1,"flex-grow-1",3,"color","lc"],["type","button","title","Add Character","routerLinkActive","router-link-active",1,"btn","btn-sm","btn-secondary","h-50","align-self-center",3,"routerLink"],[1,"bi-plus-lg"],["text","Raids","type","h4",1,"flex-grow-1",3,"color","lc"],["type","button","title","Add Raid Post","routerLinkActive","router-link-active",1,"btn","btn-sm","btn-secondary","h-50","align-self-center",3,"routerLink"],["id","raidsFilter","type","button","title","Filter Raids","data-bs-toggle","dropdown","data-bs-auto-close","outside","aria-expanded","false",1,"btn","btn-sm","btn-secondary","h-50","align-self-center","filter-button"],[1,"bi-filter","filter-symbol"],[1,"dropdown","filter-dropdown"],["aria-labelledby","raidsFilter",1,"dropdown-menu","w-20r","raid-filter"],[1,"dropdown-header"],[1,"raid-filter",3,"filterForm"],[1,"d-flex","flex","flex-wrap","gap-3","justify-content-center"],[3,"character","routerLink"],[1,"text-center","_color-discord-content-text"],[3,"raidpost","player","routerLink"]],template:function(i,r){i&1&&(o(0,"div",0)(1,"span"),a(2,"Loa Assistant Home"),n(),o(3,"a",1),x("click",function(){return r.logout()}),a(4,"Log Out"),n()(),o(5,"div",2)(6,"section",3),c(7,"announcements",4)(8,"loa-upcoming-raids",5),n(),o(9,"section")(10,"div",6),c(11,"my-header",7),o(12,"button",8),c(13,"i",9),n()(),L(14,mi,5,4),I(15,14,ri),n(),o(17,"section")(18,"div",6),c(19,"my-header",10),o(20,"button",11),c(21,"i",9),n(),o(22,"button",12),c(23,"i",13),n(),o(24,"div",14)(25,"ul",15)(26,"li")(27,"h6",16),a(28,"Filter Raids"),n()(),o(29,"li"),c(30,"raid-filter",17),n()()()(),L(31,fi,5,4),I(32,31,oi),n()(),c(34,"router-outlet")),i&2&&(s(8),m("raidposts",r.raids())("player",r.player()),s(3),m("color",r.colors.discordContenttext)("lc",r.colors.discordMenuText),s(),m("routerLink",P(11,ni)),s(3),D(r.characters),s(4),m("color",r.colors.discordContenttext)("lc",r.colors.discordMenuText),s(),m("routerLink",P(12,ai)),s(10),m("filterForm",r.raidFilterForm),s(2),D(r.raids))},dependencies:[k,ve,G,Ue,xe,dt,lt],styles:["loa-character[_ngcontent-%COMP%], raid-post[_ngcontent-%COMP%]{border:1px solid transparent}loa-character[_ngcontent-%COMP%]:hover, raid-post[_ngcontent-%COMP%]:hover{cursor:pointer;scale:1.05;border:1px solid var(--discord-content-text);border-radius:3px}.loa-home[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:transparent!important}.raid-filter[_ngcontent-%COMP%]{background-color:var(--discord-menu)}.filter-dropdown[_ngcontent-%COMP%]{list-style-type:none!important}.logout-button[_ngcontent-%COMP%]:hover{cursor:pointer}"]})}}return t})();var pt=(()=>{class t{constructor(){this.playerService=h(F),this.characterService=h(W),this.raidService=h(j),this.playerService.refreshMe()}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=y({type:t,selectors:[["loa-index"]],decls:1,vars:0,template:function(i,r){i&1&&c(0,"router-outlet")},dependencies:[H,ve],encapsulation:2})}}return t})();var ut=(()=>{class t{constructor(e,i,r){this.loaLogin=e,this.router=i,this.route=r,this.subs=[],this.returnTo=r.snapshot.queryParams.returnTo;let l=e.tokensRecieved$.subscribe(p=>{p!=null&&this.loaLogin.setTokenCookie(JSON.stringify(p),new Date(Date.now()+p.expires_in*1e3)),this.redirect()});this.subs.push(l)}ngOnInit(){}ngOnDestroy(){for(let e of this.subs)e.unsubscribe()}login(){this.loaLogin.login()}redirect(){this.returnTo?this.router.navigateByUrl(this.returnTo):this.router.navigate(["/loa-assistant/home"])}static{this.\u0275fac=function(i){return new(i||t)(g(z),g(M),g(A))}}static{this.\u0275cmp=y({type:t,selectors:[["loa-login-page"]],decls:47,vars:0,consts:[[1,"text-center","_color-discord-content-text","pt-3"],[1,"_color-discord-menu-text","text-center","p-0","fs-5"],["href","https://discord.gg/ay7dvJFnwF"],[1,"text-center","p-5"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"_color-discord-menu-text"]],template:function(i,r){i&1&&(C(0,"div",0)(1,"h4"),a(2,"LoA Assistant"),_()(),C(3,"div")(4,"p",1),a(5," Demo Server: "),V(6,"br"),C(7,"a",2),a(8,"Join Demo Server"),_(),V(9,"br"),a(10," Join the Demo Server using a Discord account first, then login via Discord. "),V(11,"br"),a(12," (Unfortunately I cannot have a Demo Discord account as it requires email verification on logins from new locations) "),V(13,"br"),a(14," (Changes Reset Daily @ 07:00 UTC) "),_()(),C(15,"div",3)(16,"button",4),Ae("click",function(){return r.login()}),a(17,"Login via Discord"),_()(),C(18,"div")(19,"section",5),a(20," This application uses Discord as a means to identify and notify users. LoA-Assistant is a project made to assist in organizing raids for LostArk communities on Discord. "),V(21,"br"),C(22,"i"),a(23,"In order to make proper use of this application, both the User and application's Discord bot must be within the same Discord server."),_(),V(24,"br")(25,"br"),C(26,"b"),a(27,"Characters"),_(),V(28,"br"),C(29,"p"),a(30," Users may enter and update their LostArk character's information through the website or discord bot, including their name, class, and item level. These characters are used when a user wishes to sign up for a raid post. "),_(),V(31,"br")(32,"br"),C(33,"b"),a(34,"Raid Posts"),_(),V(35,"br"),C(36,"p"),a(37," Post managers, members of the Discord servers with a "),C(38,"u"),a(39,"specified role"),_(),a(40,", may create and edit posts for scheduling a LostArk raid. Each post will list the raid to be attempted as well as the starting time. Other members of the server can will be able to signup for the raid's post with the characters they entered into the application. "),_(),C(41,"p"),a(42," By default the application will automatically form groups consisting of one or more parties for the raid as characters are signed up. If there are enough characters then multiple groups may be formed. These groups are tenative and the characters that are assigned may change as the list of signups changes. "),C(43,"u"),a(44,"Alternatively"),_(),a(45,", managers may manually create the groups for these raids through the website. "),_(),a(46," When it time for the raid to start, if there are ample singups, the discord bot will @mention the participating users, and list the groups for the raid. "),_()())},styles:[".btn-container[_ngcontent-%COMP%]{text-align:center;margin:auto;padding:5rem 0rem}.login-btn[_ngcontent-%COMP%]{border-radius:.5rem}"]})}}return t})();function hi(t,d){t&1&&(C(0,"div"),a(1,"Awaiting Token Response..."),_())}function gi(t,d){t&1&&(C(0,"div"),a(1,"Tokens Recieved"),_())}function vi(t,d){t&1&&(C(0,"div"),a(1,"Failed to retrieve tokens"),_())}var ft=(()=>{class t{constructor(e,i){this.logLogin=e,this.route=i,this.succesfulTokenExchange=0}ngOnInit(){let e=this.route.snapshot.queryParams,i=e.code,r=e.state;i&&r&&this.logLogin.getTokens$(i).subscribe({next:l=>{window.opener.postMessage(l),this.succesfulTokenExchange=1,console.log(l),window.close()},error:()=>{this.succesfulTokenExchange=-1}})}static{this.\u0275fac=function(i){return new(i||t)(g(z),g(A))}}static{this.\u0275cmp=y({type:t,selectors:[["loa-on-login"]],decls:4,vars:1,consts:[[1,"on-login"]],template:function(i,r){if(i&1&&(C(0,"div",0),K(1,hi,2,0,"div")(2,gi,2,0,"div")(3,vi,2,0,"div"),_()),i&2){let l;s(),Y((l=r.succesfulTokenExchange)===0?1:l===1?2:l===-1?3:-1)}},styles:[".on-login[_ngcontent-%COMP%]{margin:5rem;padding:1rem;color:#c8c8c8}"]})}}return t})();var bi=[{path:"characters/add",component:Je},{path:"characters/:id",component:Ze},{path:"raids/add",component:rt},{path:"raids/:id",component:nt}],Ci=[{path:"home",component:mt,loadChildren:()=>bi},{path:"raids/:id/edit/groups",component:et},{path:"**",redirectTo:"home",pathMatch:"full"}],vo=[{path:"login",component:ut},{path:"on-login",component:ft},{path:"",component:pt,loadChildren:()=>Ci,canActivate:[st]}];export{Ci as contentRoutes,bi as homeRoutes,vo as loaRoutes};
