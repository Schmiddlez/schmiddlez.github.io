import{a as r}from"./chunk-LDB6UGBE.js";import{b as p}from"./chunk-CG5ODPV4.js";import{Ca as d,db as i,ib as l,jb as c,rb as m,xa as a}from"./chunk-UUT3EF6T.js";var S=(()=>{class s{set loadUntil(e){this.stop=e,this.stop&&this.stopLoading(this.immediateStop),e==!1&&this.doLoading()}set immediate(e){this.immediateStop=e}set inheritClasses(e){if(!e)for(let t of this.eleRef.nativeElement.classList)this.render.removeClass(this.container,t)}constructor(e,t,n,o){if(this.eleRef=e,this.viewRef=t,this.render=n,this.route=o,this.isShownChange=new a,this.subs=[],this.container=this.render.createElement("div"),this.render.addClass(this.container,"loading-container"),this.inheritClasses)for(let f of this.eleRef.nativeElement.classList)this.render.addClass(this.container,f);this.loading=this.render.createElement("div"),this.render.addClass(this.loading,"loading"),this.container.appendChild(this.loading);let h=this.viewRef.createComponent(r);h.setInput("mode","indeterminate"),this.spinner=h.injector.get(r)._elementRef.nativeElement}ngOnInit(){let e=this.eleRef.nativeElement,t=this.render.parentNode(e);this.render.insertBefore(t,this.container,e),this.render.removeChild(e.parentElement,e),this.render.appendChild(this.container,e),this.render.removeChild(this.spinner.parentElement,this.spinner),this.render.appendChild(this.loading,this.spinner);let n=this.route.url.subscribe(o=>{this.doLoading()});this.subs.push(n)}ngOnDestroy(){for(let e of this.subs)e.unsubscribe()}doLoading(){this.render.setStyle(this.eleRef.nativeElement,"visibility","hidden"),this.render.setStyle(this.loading,"display","flex"),this.render.setStyle(this.loading,"justify-content","center"),this.render.setStyle(this.loading,"margin-top","10rem"),this.stop&&this.stopLoading(this.immediateStop)}stopLoading(e){e?this.show():setTimeout(()=>{this.show()},1e3)}show(){this.render.setStyle(this.loading,"display","none"),this.render.setStyle(this.eleRef.nativeElement,"visibility","visible")}static{this.\u0275fac=function(t){return new(t||s)(i(d),i(c),i(l),i(p))}}static{this.\u0275dir=m({type:s,selectors:[["","hasLoading",""]],inputs:{loadUntil:"loadUntil",immediate:"immediate",inheritClasses:"inheritClasses"},outputs:{isShownChange:"isShownChange"}})}}return s})();export{S as a};
