import{a as X}from"./chunk-ZJPQQ3AL.js";import{a as m}from"./chunk-G6P33L2Y.js";import{a as Q}from"./chunk-D3Q6T4HR.js";import{a as q}from"./chunk-LUEFBJHU.js";import{a as l}from"./chunk-P4ZELJWN.js";import{c as H,e as Z,g as K,h as W}from"./chunk-KVX4MIOR.js";import{d as J,e as Y,f as V,g as G}from"./chunk-5V4PC647.js";import{d as B,m as $}from"./chunk-OOKV5ZR5.js";import{Ba as T,Fb as O,Ja as x,Jb as E,Lb as P,Mb as D,Ob as L,Pb as U,Qb as u,Rb as p,Sb as j,X as C,Xb as v,Z as k,aa as R,ab as c,bb as b,cb as M,da as a,ea as _,fb as F,gc as f,hc as g,mb as h,oc as z,qa as I,ta as S,tb as N,wa as w}from"./chunk-3AA7O2RR.js";var ce="@",de=(()=>{class t{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=a(I);loadingSchedulerFn=a(pe,{optional:!0});_engine;constructor(e,r,n,s,i){this.doc=e,this.delegate=r,this.zone=n,this.animationType=s,this.moduleImpl=i}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-RLSZZK34.js").then(n=>n),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(e):r=e(),r.catch(n=>{throw new C(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:s})=>{this._engine=n(this.animationType,this.doc);let i=new s(this.delegate,this._engine,this.zone);return this.delegate=i,i})}createRenderer(e,r){let n=this.delegate.createRenderer(e,r);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let s=new A(n);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(i=>{let d=i.createRenderer(e,r);s.use(d),this.scheduler??=this.injector.get(S,null,{optional:!0}),this.scheduler?.notify(11)}).catch(i=>{s.use(n)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(r){M()};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})(),A=class{delegate;replay=[];\u0275type=1;constructor(o){this.delegate=o}use(o){if(this.delegate=o,this.replay!==null){for(let e of this.replay)e(o);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(o,e){return this.delegate.createElement(o,e)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}get destroyNode(){return this.delegate.destroyNode}appendChild(o,e){this.delegate.appendChild(o,e)}insertBefore(o,e,r,n){this.delegate.insertBefore(o,e,r,n)}removeChild(o,e,r){this.delegate.removeChild(o,e,r)}selectRootElement(o,e){return this.delegate.selectRootElement(o,e)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,e,r,n){this.delegate.setAttribute(o,e,r,n)}removeAttribute(o,e,r){this.delegate.removeAttribute(o,e,r)}addClass(o,e){this.delegate.addClass(o,e)}removeClass(o,e){this.delegate.removeClass(o,e)}setStyle(o,e,r,n){this.delegate.setStyle(o,e,r,n)}removeStyle(o,e,r){this.delegate.removeStyle(o,e,r)}setProperty(o,e,r){this.shouldReplay(e)&&this.replay.push(n=>n.setProperty(o,e,r)),this.delegate.setProperty(o,e,r)}setValue(o,e){this.delegate.setValue(o,e)}listen(o,e,r,n){return this.shouldReplay(e)&&this.replay.push(s=>s.listen(o,e,r,n)),this.delegate.listen(o,e,r,n)}shouldReplay(o){return this.replay!==null&&o.startsWith(ce)}},pe=new R("");function y(t="animations"){return T("NgAsyncAnimations"),_([{provide:F,useFactory:(o,e,r)=>new de(o,e,r,t),deps:[B,V,w]},{provide:x,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var te=[{path:"mudae",title:"Mudae Tracker",loadChildren:()=>import("./chunk-7OEUNHFT.js").then(t=>t.mudaeRoutes)},{path:"loa-assistant",title:"Loa Assistant",loadChildren:()=>import("./chunk-F2FJBYIH.js").then(t=>t.loaRoutes)},{path:"sns",title:"Sns App",loadChildren:()=>import("./chunk-YSUZCHTT.js").then(t=>t.snsRoutes)},{path:"resume",title:"Resume App",loadChildren:()=>import("./chunk-ELZFA5GZ.js").then(t=>t.resumeRoutes)},{path:"**",redirectTo:"/mudae",pathMatch:"full"}];function oe(t,o){let e=l.loa();return t.url.includes(e)?o(me(t)):o(t)}function me(t){let e=a(m).get("loa-tokens");if(e){let s=JSON.parse(e).access_token;var r=t.headers.append("Authorization","Bearer "+s);return t.clone({headers:r})}return t}function ne(t,o){let e=l.mudae();return t.url.includes(e)?o(he(t)):o(t)}var ue=["/characters/favorite","/characters/unfavorite","/characters/unclaimed","/characters/owned","/characters/lost","/users/@me"];function he(t){let e=a(m).get("mudae-tokens");if(e){let i=JSON.parse(e).access_token;if(i){var r=t.headers.append("Authorization","Bearer "+i);return t.clone({headers:r,withCredentials:!0})}}else{var r=t.headers.append("Authorization","Bearer anonymous");let i=t.url.replace(`${l.mudae()}/api`,"");if(/\/updates\/([A-Za-z0-9]+)/.test(i)){let d=localStorage.getItem(X);var n=Q();return d&&(n=JSON.parse(d)),t.clone({url:re(t),method:"POST",body:n,headers:r,withCredentials:!0})}else return t.clone({url:ue.includes(i)?re(t):t.url,headers:r,withCredentials:!0})}return t}function re(t){return t.url.replace(`${l.mudae()}/api`,`${l.mudae()}/api/anonymous`)}function ie(t,o){let e=l.resume();return t.url.includes(e)?o(fe(t)):o(t)}function fe(t){let e=a(m).get("resume_token");if(e){var r=t.headers.append("Authorization","Bearer "+e);return t.clone({headers:r})}return t}var se={providers:[K(te,W({scrollPositionRestoration:"enabled"})),y(),J(Y([ne,ie,oe])),y(),y()]};var ge=t=>[t];function ye(t,o){if(t&1&&(u(0,"div")(1,"a",5),f(2),p()()),t&2){let e=v().$implicit;c(),O("routerLink",z(2,ge,e.link)),c(),g(e.linkText||e.link)}}function ve(t,o){if(t&1&&(u(0,"div",2)(1,"div",3)(2,"strong")(3,"h5"),f(4),p()()(),u(5,"div",4)(6,"div"),f(7),p(),N(8,ye,3,4,"div"),p()()),t&2){let e=o.$implicit,r=v();E(r.getNotificationClass(e)),c(4),g(e.header),c(3),g(e.body),c(),P(e.link?8:-1)}}var ae=(()=>{class t{constructor(e){this.toastService=e}ngOnInit(){this.toasts=this.toastService.toasts}getNotificationClass(e){var r="alert";switch(e.type){case"success":r+=" alert-success";break;case"warning":r+=" alert-warning";break;case"danger":r+=" alert-danger";break;case"etc":r+=" alert-secondary";break}return e.classname&&(r+=` ${e.classname}`),r}static{this.\u0275fac=function(r){return new(r||t)(b(q))}}static{this.\u0275cmp=h({type:t,selectors:[["toast-list"]],decls:3,vars:0,consts:[[1,"toast-list","position-fixed","bottom-1r","end-1r"],["role","alert","aria-live","polite","aria-atomic","true",3,"class"],["role","alert","aria-live","polite","aria-atomic","true"],[1,"alert-heading"],[1,"toast-body"],[1,"text-primary","toast-link",3,"routerLink"]],template:function(r,n){r&1&&(u(0,"div",0),L(1,ve,9,5,"div",1,D),p()),r&2&&(c(),U(n.toasts))},dependencies:[$,Z],styles:[".toast-list[_ngcontent-%COMP%]{position:fixed;right:1rem;bottom:1rem;opacity:.85;z-index:3000;pointer-events:none}.toast-link[_ngcontent-%COMP%]{pointer-events:all;cursor:pointer}"]})}}return t})();var le=(()=>{class t{constructor(){this.title="mudae-tracker"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(r,n){r&1&&j(0,"router-outlet")(1,"toast-list")},dependencies:[H,ae],encapsulation:2})}}return t})();G(le,se).catch(t=>console.error(t));
